<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>未名的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="慕然回首，你是否看到过去的自己">
<meta property="og:type" content="website">
<meta property="og:title" content="未名的博客">
<meta property="og:url" content="https://shallowshades.github.io.git/page/3/index.html">
<meta property="og:site_name" content="未名的博客">
<meta property="og:description" content="慕然回首，你是否看到过去的自己">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="未名">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="未名的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">未名的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shallowshades.github.io.git"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-泛型编程9-map&amp;multimap" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/24/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B9-map&multimap/" class="article-date">
  <time datetime="2022-02-24T08:31:34.000Z" itemprop="datePublished">2022-02-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/24/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B9-map&multimap/">泛型编程9-map&amp;multimap</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="map"><a href="#map" class="headerlink" title="map"></a>map</h1><h2 id="map基本概念"><a href="#map基本概念" class="headerlink" title="map基本概念"></a>map基本概念</h2><p>map中所有元素都是pair<br>pair中第一个元素为key（键值），起到索引作用，第二个元素为value（实值）<br>所有元素都会根据元素的键值自动排序<br><strong>map/multimap属于关联式容器，底层结构是用二叉树实现</strong><br>可以根据key值快速找到value值<br><strong>map中所有元素都是成对出现，插入数据时候要使用对组</strong></p>
<h2 id="map和multimap区别"><a href="#map和multimap区别" class="headerlink" title="map和multimap区别"></a>map和multimap区别</h2><p>map不允许容器中有重复key值元素(只检测key，不检测value，即使value不一样)<br>multimap允许容器中有重复key值元素</p>
<h2 id="map-常用函数"><a href="#map-常用函数" class="headerlink" title="map 常用函数"></a>map 常用函数</h2><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>map&lt;T1, T2&gt; mp;</td>
<td>map默认构造函数</td>
</tr>
<tr>
<td>map(const map &amp;mp);</td>
<td>拷贝构造函数</td>
</tr>
<tr>
<td>map&amp; operator=(const map &amp;mp);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>size();</td>
<td>返回容器中元素的数目</td>
</tr>
<tr>
<td>empty();</td>
<td>判断容器是否为空</td>
</tr>
<tr>
<td>swap(st);</td>
<td>交换两个集合容器</td>
</tr>
<tr>
<td>insert(elem);</td>
<td>在容器中插入元素</td>
</tr>
<tr>
<td>clear();</td>
<td>清除所有元素</td>
</tr>
<tr>
<td>erase(pos);</td>
<td>删除pos迭代器所指的元素，返回下一个元素的迭代器</td>
</tr>
<tr>
<td>erase(beg, end);</td>
<td>删除区间[beg,end)的所有元素 ，返回下一个元素的迭代器</td>
</tr>
<tr>
<td>erase(key);</td>
<td>删除容器中值为key的元素</td>
</tr>
<tr>
<td>find(key);</td>
<td>查找key是否存在,若存在，返回该键的元素的迭代器；否则map.end();</td>
</tr>
<tr>
<td>count(key);</td>
<td>统计key的元素个数;map要么为1要么为0;multimap正常</td>
</tr>
</tbody></table>
<h2 id="map容器排序"><a href="#map容器排序" class="headerlink" title="map容器排序"></a>map容器排序</h2><p>map容器默认排序规则为 按照key值进行 从小到大排序，掌握如何改变排序规则<br>利用仿函数，可以改变排序规则<br><strong>自定义类型都要指定排序规则（仿函数）</strong></p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age) :_name(name), _age(age) &#123; &#125;</span><br><span class="line">	<span class="built_in">person</span>() :_name(<span class="string">&quot;unnamed&quot;</span>), _age(<span class="number">-1</span>) &#123; &#125;</span><br><span class="line">	~<span class="built_in">person</span>() &#123; &#125;</span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt; (<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2);</span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp; os, <span class="keyword">const</span> person &amp; p);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &gt; (<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2) &#123;</span><br><span class="line">	<span class="keyword">if</span> (p1._age == p2._age) <span class="keyword">return</span> p1._name.<span class="built_in">size</span>() &lt; p2._name.<span class="built_in">size</span>();</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> p1._age &lt; p2._age;</span><br><span class="line">&#125;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p) &#123; <span class="keyword">return</span> os &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//仿函数</span></span><br><span class="line"><span class="comment">//类 函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">compare</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">(<span class="keyword">const</span> T&amp; x, <span class="keyword">const</span> T&amp; y)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> x &gt; y; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">person <span class="title">make_person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	string s; <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="built_in">rand</span>() % <span class="number">6</span>) + <span class="number">1</span>; ++i) s += <span class="built_in"><span class="keyword">char</span></span>(<span class="string">&#x27;a&#x27;</span> + <span class="built_in">rand</span>() % <span class="number">10</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">person</span>(s, <span class="built_in">rand</span>() % <span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">pair&lt;<span class="keyword">int</span>, string&gt; <span class="title">Make_Pair</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="built_in">rand</span>() % <span class="number">6</span>, <span class="built_in">string</span>(<span class="string">&quot;xtz&quot;</span>)); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">srand</span>((<span class="keyword">unsigned</span> <span class="keyword">int</span>)<span class="built_in">time</span>(<span class="number">0</span>));<span class="comment">//rand seed</span></span><br><span class="line">	multimap&lt;<span class="keyword">int</span>, string&gt; m;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) m.<span class="built_in">insert</span>(<span class="built_in">Make_Pair</span>());</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (multimap&lt;<span class="keyword">int</span>, string&gt;::iterator it = m.<span class="built_in">begin</span>(); it != m.<span class="built_in">end</span>(); ++it) cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; boolalpha &lt;&lt; (m.<span class="built_in">find</span>(<span class="number">2</span>) != m.<span class="built_in">end</span>()) &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; m.<span class="built_in">count</span>(<span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-------------\n&quot;</span>;</span><br><span class="line">	map&lt;person, string, compare&lt;person&gt; &gt; mp;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) mp.<span class="built_in">insert</span>(&#123; <span class="built_in">make_person</span>(),<span class="string">&quot;xxxx&quot;</span> &#125;);</span><br><span class="line">	<span class="keyword">for</span> (map&lt;person, string, compare&lt;person&gt; &gt; ::iterator it = mp.<span class="built_in">begin</span>(); it != mp.<span class="built_in">end</span>(); ++it)</span><br><span class="line">		cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>0       xtz<br>1       xtz<br>1       xtz<br>3       xtz<br>3       xtz<br>3       xtz<br>3       xtz<br>4       xtz<br>4       xtz<br>4       xtz<br>false<br>0<br>di      0       xxxx<br>dhef    0       xxxx<br>bgg     1       xxxx<br>jb      2       xxxx<br>cedg    2       xxxx<br>gef     3       xxxx<br>ddjc    4       xxxx<br>hh      5       xxxx<br>hea     5       xxxx</p>
<hr>
<h2 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h2><p><strong>形参:全称为”形式参数”是在定义函数名和函数体的时候使用的参数, 目的是用来接收调用该函数时传如的参数.</strong><br><strong>实参:全称为”实际参数”是在调用时传递个该函数的参数.</strong><br><strong>形参为const修饰，迭代器要用const_iterator</strong></p>
<hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//案例 - 员工分组</span></span><br><span class="line"><span class="comment">//案例描述</span></span><br><span class="line"><span class="comment">//公司今天招聘了10个员工(ABCDEFGHIJ) ，10名员工进入公司之后，需要指派员工在那个部门工作</span></span><br><span class="line"><span class="comment">//员工信息有 : 姓名工资组成; 部门分为:策划、美术、研发</span></span><br><span class="line"><span class="comment">//随机给10名员工分配部门和工资</span></span><br><span class="line"><span class="comment">//通过multimap进行信 息的插入key(部门编号) value(员工)</span></span><br><span class="line"><span class="comment">//分部门显示员工信息</span></span><br><span class="line"><span class="comment">//实现步骤</span></span><br><span class="line"><span class="comment">//1.创建10名员工，放到vector中</span></span><br><span class="line"><span class="comment">//2.遍历vector容器，取出每个员工，进行随机分组</span></span><br><span class="line"><span class="comment">//3.分组后，将员工部门编号作为key, 具体员工作为value, 放入到multimap容器中</span></span><br><span class="line"><span class="comment">//4.分部门显示员工信息</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">auto</span> planer = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">auto</span> artist = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">auto</span> research = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">worker</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">worker</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; salary) :_name(name), _salary(salary) &#123;&#125;</span><br><span class="line">	<span class="built_in">worker</span>() :_name(<span class="string">&quot;worker_x&quot;</span>), _salary(<span class="number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> worker&amp; w);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string _name;</span><br><span class="line">	<span class="keyword">int</span> _salary;</span><br><span class="line">&#125;;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> worker&amp; w) &#123; <span class="keyword">return</span> os &lt;&lt; w._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; w._salary; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">create_workers</span><span class="params">(vector&lt;worker&gt;&amp; v)</span> </span>&#123;</span><br><span class="line">	string name_seed = <span class="string">&quot;ABCDEFGHIJ&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) v.<span class="built_in">push_back</span>(<span class="built_in">worker</span>(<span class="built_in">string</span>(<span class="string">&quot;worker_&quot;</span>) + name_seed[i], <span class="built_in">rand</span>() % <span class="number">10000</span> + <span class="number">5000</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">group_workers</span><span class="params">(<span class="keyword">const</span> vector&lt;worker&gt;&amp; v, multimap&lt;<span class="keyword">int</span>, worker&gt;&amp; m)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">srand</span>((<span class="keyword">unsigned</span> <span class="keyword">int</span>)<span class="built_in">time</span>(<span class="number">0</span>));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="built_in">rand</span>() % <span class="number">3</span> + <span class="number">1</span>, v[i]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">show_grouped_workers</span><span class="params">(<span class="keyword">const</span> multimap&lt;<span class="keyword">int</span>, worker&gt;&amp; m)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	map&lt;<span class="keyword">int</span>, worker&gt;::const_iterator pos = m.<span class="built_in">end</span>();</span><br><span class="line">	</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;planer department:\n&quot;</span>;</span><br><span class="line">	count = m.<span class="built_in">count</span>(planer);</span><br><span class="line">	pos = m.<span class="built_in">find</span>(planer);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i, ++pos) cout &lt;&lt; pos-&gt;first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; pos-&gt;second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;artist department:\n&quot;</span>;</span><br><span class="line">	count = m.<span class="built_in">count</span>(artist);</span><br><span class="line">	pos = m.<span class="built_in">find</span>(artist);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i, ++pos) cout &lt;&lt; pos-&gt;first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; pos-&gt;second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;research department:\n&quot;</span>;</span><br><span class="line">	count = m.<span class="built_in">count</span>(research);</span><br><span class="line">	pos = m.<span class="built_in">find</span>(research);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i, ++pos) cout &lt;&lt; pos-&gt;first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; pos-&gt;second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//create workers</span></span><br><span class="line">	vector&lt;worker&gt; v;</span><br><span class="line">	<span class="built_in">create_workers</span>(v);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//group workers</span></span><br><span class="line">	multimap&lt;<span class="keyword">int</span>, worker&gt; m;</span><br><span class="line">	<span class="built_in">group_workers</span>(v, m);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//show grouped workers</span></span><br><span class="line">	<span class="built_in">show_grouped_workers</span>(m);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;show all workers\n&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) cout &lt;&lt; v[i] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出结果：<br>planer department:<br>1       worker_A        5041<br>1       worker_D        11500<br>1       worker_I        11962<br>1       worker_J        9464<br>artist department:<br>2       worker_C        11334<br>2       worker_H        14358<br>research department:<br>3       worker_B        13467<br>3       worker_E        14169<br>3       worker_F        10724<br>3       worker_G        6478<br>show all workers<br>worker_A        5041<br>worker_B        13467<br>worker_C        11334<br>worker_D        11500<br>worker_E        14169<br>worker_F        10724<br>worker_G        6478<br>worker_H        14358<br>worker_I        11962<br>worker_J        9464</p>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/24/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B9-map&multimap/" data-id="clca7m490002axog048zg9asp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程8-set&amp;multiset" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B8-set&multiset/" class="article-date">
  <time datetime="2022-02-21T15:16:37.000Z" itemprop="datePublished">2022-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B8-set&multiset/">泛型编程8-set&amp;multiset</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="set"><a href="#set" class="headerlink" title="set"></a>set</h1><h2 id="set基本概念"><a href="#set基本概念" class="headerlink" title="set基本概念"></a>set基本概念</h2><p>所有元素都会在插入时自动被排序</p>
<h2 id="set本质"><a href="#set本质" class="headerlink" title="set本质"></a>set本质</h2><p>set/multiset属于关联式容器，底层结构是用二叉树实现。</p>
<h2 id="set和multiset区别"><a href="#set和multiset区别" class="headerlink" title="set和multiset区别"></a>set和multiset区别</h2><p>set不允许容器中有重复的元素<br>multiset允许容器中有重复的元素</p>
<h2 id="set常用函数"><a href="#set常用函数" class="headerlink" title="set常用函数"></a>set常用函数</h2><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>set&lt;T&gt; st;</td>
<td>默认构造函数</td>
</tr>
<tr>
<td>set(const set &amp;st);</td>
<td>拷贝构造函数</td>
</tr>
<tr>
<td>set&amp; operator=(const set &amp;st);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>size();</td>
<td>返回容器中元素的数目</td>
</tr>
<tr>
<td>empty();</td>
<td>判断容器是否为空</td>
</tr>
<tr>
<td>swap(st);</td>
<td>交换两个集合容器</td>
</tr>
<tr>
<td>insert(elem);</td>
<td>在容器中插入元素</td>
</tr>
<tr>
<td>clear();</td>
<td>清除所有元素</td>
</tr>
<tr>
<td>erase(pos);</td>
<td>删除pos迭代器所指的元素，返回下一个元素的迭代器</td>
</tr>
<tr>
<td>erase(beg, end);</td>
<td>删除区间[beg,end)的所有元素 ，返回下一个元素的迭代器</td>
</tr>
<tr>
<td>erase(elem);</td>
<td>删除容器中值为elem的元素</td>
</tr>
<tr>
<td>find(key);</td>
<td>查找key是否存在,若存在返回指向元素的迭代器;否则返回set.end();</td>
</tr>
<tr>
<td>count(key);</td>
<td>统计key的元素个数,对于set，结果为0或者1;对于multiset正常</td>
</tr>
</tbody></table>
<h2 id="set和multiset的区别"><a href="#set和multiset的区别" class="headerlink" title="set和multiset的区别"></a>set和multiset的区别</h2><p>1、set不可以插入重复数据，而multiset可以<br>2、set插入数据的同时会返回插入结果，表示插入是否成功<br>3、multiset不会检测数据，因此可以插入重复数据</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">srand</span>((<span class="keyword">unsigned</span> <span class="keyword">int</span>)<span class="built_in">time</span>(<span class="number">0</span>));<span class="comment">//rand seed</span></span><br><span class="line">	set&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = <span class="built_in">rand</span>() % <span class="number">8</span>;</span><br><span class="line">		pair&lt;set&lt;<span class="keyword">int</span>&gt;::iterator, <span class="keyword">bool</span>&gt; ret = s.<span class="built_in">insert</span>(x);</span><br><span class="line">		<span class="keyword">if</span> (ret.second) cout &lt;&lt; x &lt;&lt; <span class="string">&quot;\t succeed to insert\n&quot;</span>;</span><br><span class="line">		<span class="keyword">else</span> cout &lt;&lt; x &lt;&lt; <span class="string">&quot;\t fail to insert\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	multiset&lt;<span class="keyword">int</span>&gt; ms;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">		<span class="keyword">int</span> x = <span class="built_in">rand</span>() % <span class="number">8</span>;</span><br><span class="line">		multiset&lt;<span class="keyword">int</span>&gt;::iterator ret = ms.<span class="built_in">insert</span>(x);</span><br><span class="line">		cout &lt;&lt; x &lt;&lt; <span class="string">&quot;\t succeed to insert\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (multiset&lt;<span class="keyword">int</span>&gt;::iterator it = ms.<span class="built_in">begin</span>(); it != ms.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出结果：<br>5        succeed to insert<br>4        succeed to insert<br>2        succeed to insert<br>4        fail to insert<br>0        succeed to insert<br>2        fail to insert<br>0        fail to insert<br>2        fail to insert<br>1        succeed to insert<br>0        fail to insert<br>0 1 2 4 5<br>5        succeed to insert<br>0        succeed to insert<br>7        succeed to insert<br>0        succeed to insert<br>2        succeed to insert<br>4        succeed to insert<br>6        succeed to insert<br>6        succeed to insert<br>1        succeed to insert<br>4        succeed to insert<br>0 0 1 2 4 4 5 6 6 7</p>
<hr>
<h2 id="set容器排序"><a href="#set容器排序" class="headerlink" title="set容器排序"></a>set容器排序</h2><p>set容器默认排序规则为从小到大，如何改变排序规则<br><strong>利用仿函数，可以改变排序规则</strong><br><strong>自定义类型都要指定排序规则（仿函数）</strong></p>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line">	<span class="built_in">person</span>() :_name(<span class="string">&quot;unnamed&quot;</span>), _age(<span class="number">-1</span>) &#123;&#125;</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> person&amp; p) : _name(p._name), _age(p._age) &#123;&#125;</span><br><span class="line">	<span class="built_in">person</span>(person&amp;&amp; p) <span class="keyword">noexcept</span> :_name(p._name), _age(p._age) &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt; (<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2);</span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream &amp; os, <span class="keyword">const</span> person &amp; p);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &gt; (<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2) &#123;</span><br><span class="line">	<span class="keyword">if</span> (p1._age == p2._age) <span class="keyword">return</span> p1._name.<span class="built_in">size</span>() &lt; p2._name.<span class="built_in">size</span>();</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> p1._age &lt; p2._age;</span><br><span class="line">&#125;</span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p) &#123; <span class="keyword">return</span> os &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//仿函数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">compare</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">bool</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">(<span class="keyword">const</span> T&amp; x, <span class="keyword">const</span> T&amp; y)</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> x &gt; y; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">person <span class="title">make_person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	string s; <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="built_in">rand</span>() % <span class="number">6</span>) + <span class="number">1</span>; ++i) s += <span class="built_in"><span class="keyword">char</span></span>(<span class="string">&#x27;a&#x27;</span> + <span class="built_in">rand</span>() % <span class="number">10</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">person</span>(s, <span class="built_in">rand</span>() % <span class="number">8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">srand</span>((<span class="keyword">unsigned</span> <span class="keyword">int</span>)<span class="built_in">time</span>(<span class="number">0</span>));<span class="comment">//rand seed</span></span><br><span class="line">	set&lt;<span class="keyword">int</span>&gt; s1;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) s1.<span class="built_in">insert</span>(<span class="built_in">rand</span>() % <span class="number">16</span>);</span><br><span class="line">	<span class="keyword">for</span> (set&lt;<span class="keyword">int</span>&gt;::iterator it = s1.<span class="built_in">begin</span>(); it != s1.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//自定义类型都要指定排序规则</span></span><br><span class="line">	set&lt;<span class="keyword">int</span>, compare&lt;<span class="keyword">int</span>&gt; &gt; s2;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) s2.<span class="built_in">insert</span>(<span class="built_in">rand</span>() % <span class="number">16</span>);</span><br><span class="line">	<span class="keyword">for</span> (set&lt;<span class="keyword">int</span>, compare&lt;<span class="keyword">int</span>&gt; &gt;::iterator it = s2.<span class="built_in">begin</span>(); it != s2.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	set&lt;person, compare&lt;person&gt; &gt; s3;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) s3.<span class="built_in">insert</span>(<span class="built_in">make_person</span>());</span><br><span class="line">	<span class="keyword">for</span> (set&lt;person, compare&lt;person&gt; &gt;::iterator it = s3.<span class="built_in">begin</span>(); it != s3.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>0 2 3 4 9 11 14<br>15 14 13 12 11 7 3 2 1<br>fi      0<br>dc      2<br>e       4<br>jfch    4<br>bi      5<br>hf      6<br>eei     6<br>bae     7</p>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B8-set&multiset/" data-id="clca7m48z0026xog076sl1dk8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程7-list" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B7-list/" class="article-date">
  <time datetime="2022-02-21T13:37:22.000Z" itemprop="datePublished">2022-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B7-list/">泛型编程7-list</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="list"><a href="#list" class="headerlink" title="list"></a>list</h1><h2 id="list基本概念"><a href="#list基本概念" class="headerlink" title="list基本概念"></a>list基本概念</h2><p>将数据进行链式存储<br>链表（list）是一种物理存储单元上非连续的存储结构，数据元素的逻辑顺序是通过链表中的指针链接实现的<br>链表的组成：链表由一系列结点组成<br>结点的组成：一个是存储数据元素的数据域，另一个是存储下一个结点地址的指针域<br>STL中的链表是一个双向循环链表</p>
<p><strong>由于链表的存储方式并不是连续的内存空间，因此链表list中的迭代器只支持前移和后移，属于双向迭代器</strong></p>
<h2 id="list的优点"><a href="#list的优点" class="headerlink" title="list的优点"></a>list的优点</h2><p>采用动态存储分配，不会造成内存浪费和溢出<br>链表执行插入和删除操作十分方便，修改指针即可，不需要移动大量元素</p>
<h2 id="list的缺点"><a href="#list的缺点" class="headerlink" title="list的缺点"></a>list的缺点</h2><p>链表灵活，但是空间(指针域) 和 时间（遍历）额外耗费较大</p>
<p><strong>List有一个重要的性质，插入操作和删除操作都不会造成原有list迭代器的失效，这在vector是不成立的。</strong></p>
<h2 id="list构造函数"><a href="#list构造函数" class="headerlink" title="list构造函数"></a>list构造函数</h2><p>创建list容器</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>list&lt;T&gt; lst;</td>
<td>list采用采用模板类实现,对象的默认构造形式</td>
</tr>
<tr>
<td>list(beg,end);</td>
<td>构造函数将[beg, end)区间中的元素拷贝给本身</td>
</tr>
<tr>
<td>list(n,elem);</td>
<td>构造函数将n个elem拷贝给本身</td>
</tr>
<tr>
<td>list(const list &amp;lst);</td>
<td>拷贝构造函数</td>
</tr>
</tbody></table>
<h2 id="list-赋值和交换"><a href="#list-赋值和交换" class="headerlink" title="list 赋值和交换"></a>list 赋值和交换</h2><p>给list容器进行赋值，以及交换list容器</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>assign(beg, end);</td>
<td>将[beg, end)区间中的数据拷贝赋值给本身</td>
</tr>
<tr>
<td>assign(n, elem);</td>
<td>将n个elem拷贝赋值给本身</td>
</tr>
<tr>
<td>list&amp; operator=(const list &amp;lst);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>swap(lst);</td>
<td>将lst与本身的元素互换</td>
</tr>
</tbody></table>
<h2 id="list-大小操作"><a href="#list-大小操作" class="headerlink" title="list 大小操作"></a>list 大小操作</h2><p>对list容器的大小进行操作</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>size();</td>
<td>返回容器中元素的个数</td>
</tr>
<tr>
<td>empty();</td>
<td>判断容器是否为空</td>
</tr>
<tr>
<td>resize(num);</td>
<td>重新指定容器的长度为num，若容器变长，则以默认值填充新位置；如果容器变短，则末尾超出容器长度的元素被删除</td>
</tr>
<tr>
<td>resize(num, elem);</td>
<td>重新指定容器的长度为num，若容器变长，则以elem值填充新位置；如果容器变短，则末尾超出容器长度的元素被删除</td>
</tr>
</tbody></table>
<h2 id="list-插入和删除"><a href="#list-插入和删除" class="headerlink" title="list 插入和删除"></a>list 插入和删除</h2><p>对list容器进行数据的插入和删除</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>push_back(elem);</td>
<td>在容器尾部加入一个元素</td>
</tr>
<tr>
<td>pop_back();</td>
<td>删除容器中最后一个元素</td>
</tr>
<tr>
<td>push_front(elem);</td>
<td>在容器开头插入一个元素</td>
</tr>
<tr>
<td>pop_front();</td>
<td>从容器开头移除第一个元素</td>
</tr>
<tr>
<td>insert(pos,elem);</td>
<td>在pos位置插elem元素的拷贝，返回新数据的位置</td>
</tr>
<tr>
<td>insert(pos,n,elem);</td>
<td>在pos位置插入n个elem数据，无返回值</td>
</tr>
<tr>
<td>insert(pos,beg,end);</td>
<td>在pos位置插入[beg,end)区间的数据，无返回值</td>
</tr>
<tr>
<td>clear();</td>
<td>移除容器的所有数据</td>
</tr>
<tr>
<td>erase(beg,end);</td>
<td>删除[beg,end)区间的数据，返回下一个数据的位置</td>
</tr>
<tr>
<td>erase(pos);</td>
<td>删除pos位置的数据，返回下一个数据的位置</td>
</tr>
<tr>
<td>remove(elem);</td>
<td>删除容器中所有与elem值匹配的元素</td>
</tr>
</tbody></table>
<h2 id="list-数据存取"><a href="#list-数据存取" class="headerlink" title="list 数据存取"></a>list 数据存取</h2><p>对list容器中数据进行存取</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>front();</td>
<td>返回第一个元素</td>
</tr>
<tr>
<td>back();</td>
<td>返回最后一个元素</td>
</tr>
</tbody></table>
<h2 id="list-反转和排序"><a href="#list-反转和排序" class="headerlink" title="list 反转和排序"></a>list 反转和排序</h2><p>将容器中的元素反转，以及将容器中的数据进行排序</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>reverse();</td>
<td>反转链表</td>
</tr>
<tr>
<td>sort();</td>
<td>链表排序</td>
</tr>
</tbody></table>
<p><strong>对于自定义数据类型，必须要指定排序规则，否则编译器不知道如何进行排序</strong><br><strong>高级排序只是在排序规则上再进行一次逻辑规则制定，并不复杂</strong></p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;array&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">person</span>() : _age(<span class="number">0</span>), _height(<span class="number">0</span>) &#123; </span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;default ctor\n&quot;</span>; </span><br><span class="line">		_name = <span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">&quot;unnamed&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age, <span class="keyword">const</span> <span class="keyword">int</span>&amp; height) : _age(age), _height(height) &#123; </span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;parameters ctor\n&quot;</span>; </span><br><span class="line">		_name = <span class="keyword">new</span> <span class="built_in">string</span>(name);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> person&amp; p) : _age(p._age), _height(p._height) &#123; </span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;copy ctor\n&quot;</span>;</span><br><span class="line">		_name = <span class="keyword">new</span> <span class="built_in">string</span>(p._name[<span class="number">0</span>]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">person</span>(person&amp;&amp; p) <span class="keyword">noexcept</span> : _age(p._age), _height(p._height) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;move ctor\n&quot;</span>;</span><br><span class="line">		_name = p._name;</span><br><span class="line">		p._name = <span class="literal">nullptr</span>;</span><br><span class="line">		p._age = <span class="number">0</span>;</span><br><span class="line">		p._height = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	person&amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> person&amp; p) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;copy assign\n&quot;</span>;</span><br><span class="line">		_name = <span class="keyword">new</span> <span class="built_in">string</span>(p._name[<span class="number">0</span>]);</span><br><span class="line">		_age = p._age;</span><br><span class="line">		_height = p._height;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	person&amp; <span class="keyword">operator</span> = (person&amp;&amp; p) <span class="keyword">noexcept</span> &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;move assign\n&quot;</span>;</span><br><span class="line">		_name = p._name;</span><br><span class="line">		_age = p._age;</span><br><span class="line">		_height = p._height;</span><br><span class="line">		p._name = <span class="literal">nullptr</span>;</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function">string <span class="title">name</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> *_name; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _age; &#125;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">height</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _height; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p);</span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="title">compare_person</span><span class="params">(<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2)</span></span>;</span><br><span class="line"></span><br><span class="line">	~<span class="built_in">person</span>() &#123; </span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;default dtor\n&quot;</span>; </span><br><span class="line">		<span class="keyword">delete</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string* _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">	<span class="keyword">int</span> _height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p) &#123; <span class="keyword">return</span> os &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._height; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare_person</span><span class="params">(<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (p1._age == p2._age) <span class="keyword">return</span> p1._height &gt; p2._height;</span><br><span class="line">	<span class="keyword">return</span> p1._age &lt; p2._age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	list&lt;person&gt; L;</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;刘备&quot;</span>, <span class="number">35</span>, <span class="number">175</span>));</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;曹操&quot;</span>, <span class="number">45</span>, <span class="number">180</span>));</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;孙权&quot;</span>, <span class="number">40</span>, <span class="number">170</span>));</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;赵云&quot;</span>, <span class="number">25</span>, <span class="number">190</span>));</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张飞&quot;</span>, <span class="number">35</span>, <span class="number">160</span>));</span><br><span class="line">	L.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;关羽&quot;</span>, <span class="number">35</span>, <span class="number">200</span>));</span><br><span class="line"></span><br><span class="line">	person p1 = <span class="built_in">person</span>(<span class="string">&quot;xx&quot;</span>, <span class="number">22</span>, <span class="number">111</span>);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;before sort\n&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span> (list&lt;person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;behind sort\n&quot;</span>;</span><br><span class="line">	L.<span class="built_in">sort</span>(compare_person);</span><br><span class="line">	<span class="keyword">for</span> (list&lt;person&gt;::iterator it = L.<span class="built_in">begin</span>(); it != L.<span class="built_in">end</span>(); ++it) cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B7-list/" data-id="clca7m48y0024xog07tksd5r9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程6-queue&amp;stack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B6-queue&stack/" class="article-date">
  <time datetime="2022-02-21T13:27:00.000Z" itemprop="datePublished">2022-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B6-queue&stack/">泛型编程6-queue&amp;stack</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h1><h2 id="stack-基本概念"><a href="#stack-基本概念" class="headerlink" title="stack 基本概念"></a>stack 基本概念</h2><p>概念：stack是一种先进后出(First In Last Out,FILO)的数据结构，它只有一个出口<br>栈中只有顶端的元素才可以被外界使用，因此栈不允许有遍历行为<br>栈中进入数据称为 — 入栈 push<br>栈中弹出数据称为 — 出栈 pop</p>
<h2 id="stack-常用接口"><a href="#stack-常用接口" class="headerlink" title="stack 常用接口"></a>stack 常用接口</h2><p>栈容器常用的对外接口</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>stack&lt;T&gt; stk;</td>
<td>stack采用模板类实现， stack对象的默认构造形式</td>
</tr>
<tr>
<td>stack(const stack &amp;stk);</td>
<td>拷贝构造函数</td>
</tr>
<tr>
<td>stack&amp; operator=(const stack &amp;stk);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>push(elem)</td>
<td>向栈顶添加元素</td>
</tr>
<tr>
<td>pop();</td>
<td>从栈顶移除第一个元素</td>
</tr>
<tr>
<td>top();</td>
<td>返回栈顶元素</td>
</tr>
<tr>
<td>empty();</td>
<td>判断堆栈是否为空</td>
</tr>
<tr>
<td>size();</td>
<td>返回栈的大小</td>
</tr>
</tbody></table>
<h1 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h1><h2 id="queue-基本概念"><a href="#queue-基本概念" class="headerlink" title="queue 基本概念"></a>queue 基本概念</h2><p>概念：Queue是一种先进先出(First In First Out,FIFO)的数据结构，它有两个口<br>队列容器允许从一端新增元素，从另一端移除元素<br>队列中只有队头和队尾才可以被外界使用，因此队列不允许有遍历行为<br>队列中进数据称为 — 入队 push<br>队列中出数据称为 — 出队 pop</p>
<h2 id="queue-常用接口"><a href="#queue-常用接口" class="headerlink" title="queue 常用接口"></a>queue 常用接口</h2><p>功能描述：栈容器常用的对外接口</p>
<table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>queue&lt;T&gt; que;</td>
<td>queue采用模板类实现，queue对象的默认构造形式</td>
</tr>
<tr>
<td>queue(const queue &amp;que);</td>
<td>拷贝构造函数</td>
</tr>
<tr>
<td>queue&amp; operator=(const queue &amp;que);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>push(elem);</td>
<td>往队尾添加元素</td>
</tr>
<tr>
<td>pop();</td>
<td>从队头移除第一个元素</td>
</tr>
<tr>
<td>back();</td>
<td>返回最后一个元素</td>
</tr>
<tr>
<td>front();</td>
<td>返回第一个元素</td>
</tr>
<tr>
<td>empty();</td>
<td>判断堆栈是否为空</td>
</tr>
<tr>
<td>size();</td>
<td>返回栈的大小</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/21/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B6-queue&stack/" data-id="clca7m48x001zxog0763lefz3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程5-vector" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/07/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B5-vector/" class="article-date">
  <time datetime="2022-02-07T14:56:32.000Z" itemprop="datePublished">2022-02-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/07/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B5-vector/">泛型编程5-vector</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="vector容器"><a href="#vector容器" class="headerlink" title="vector容器"></a>vector容器</h1><h2 id="vector基本概念"><a href="#vector基本概念" class="headerlink" title="vector基本概念"></a>vector基本概念</h2><p>功能：vector数据结构和数组非常相似，也称为单端数组</p>
<h2 id="vector与普通数组区别"><a href="#vector与普通数组区别" class="headerlink" title="vector与普通数组区别"></a>vector与普通数组区别</h2><p>不同之处在于数组是静态空间，而vector可以动态扩展<br><strong>动态扩展：并不是在原空间之后续接新空间，而是找更大的内存空间，然后将原数据拷贝新空间，释放原空间</strong></p>
<p><strong>vector容器的迭代器是支持随机访问的迭代器</strong></p>
<h2 id="vector构造函数"><a href="#vector构造函数" class="headerlink" title="vector构造函数"></a>vector构造函数</h2><p>功能描述：创建vector容器</p>
<h3 id="函数原型"><a href="#函数原型" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>vector&lt;T&gt; v;</td>
<td>采用模板实现类实现，默认构造函数</td>
</tr>
<tr>
<td>vector(v.begin(), v.end());</td>
<td>将v[begin(), end())区间中的元素拷贝给本身</td>
</tr>
<tr>
<td>vector(n, elem);</td>
<td>构造函数将n个elem拷贝给本身</td>
</tr>
<tr>
<td>vector(const vector &amp;vec);</td>
<td>拷贝构造函数</td>
</tr>
</tbody></table>
<h3 id="函数示例"><a href="#函数示例" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(vector&lt;T&gt; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	vector&lt;<span class="keyword">int</span>&gt; v1; <span class="comment">//default ctor</span></span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">v2</span><span class="params">(v1.begin(), v1.end())</span></span>;</span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">5</span>, <span class="number">3.14</span>)</span></span>;</span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">v4</span><span class="params">(v3)</span></span>; <span class="comment">//copy ctor</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	<span class="built_in">print</span>(v2);</span><br><span class="line">	<span class="built_in">print</span>(v3);</span><br><span class="line">	<span class="built_in">print</span>(v4);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<p>3.14 3.14 3.14 3.14 3.14<br>3.14 3.14 3.14 3.14 3.14</p>
<hr>
<p><strong>总结：vector的多种构造方式没有可比性，灵活使用即可</strong></p>
<h2 id="vector赋值操作"><a href="#vector赋值操作" class="headerlink" title="vector赋值操作"></a>vector赋值操作</h2><p>功能描述：给vector容器进行赋值</p>
<h3 id="函数原型-1"><a href="#函数原型-1" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>vector&amp; operator=(const vector &amp;vec);</td>
<td>重载等号操作符</td>
</tr>
<tr>
<td>assign(beg, end);</td>
<td>将[beg, end)区间中的数据拷贝赋值给本身</td>
</tr>
<tr>
<td>assign(n, elem);</td>
<td>将n个elem拷贝赋值给本身</td>
</tr>
</tbody></table>
<h3 id="函数示例-1"><a href="#函数示例-1" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(vector&lt;T&gt; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">5</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">	vector&lt;<span class="keyword">int</span>&gt; v2;</span><br><span class="line">	v2 = v1; <span class="comment">//operator =</span></span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	<span class="built_in">print</span>(v2);</span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">4</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line">	vector&lt;<span class="keyword">int</span>&gt; v4;</span><br><span class="line">	v4.<span class="built_in">assign</span>(v3.<span class="built_in">begin</span>(), v3.<span class="built_in">end</span>()); <span class="comment">//assign[begin,end)</span></span><br><span class="line">	<span class="built_in">print</span>(v3);</span><br><span class="line">	<span class="built_in">print</span>(v4);</span><br><span class="line">	vector&lt;<span class="keyword">int</span>&gt; v5;</span><br><span class="line">	v5.<span class="built_in">assign</span>(<span class="number">6</span>, <span class="number">1</span>); <span class="comment">//assign(n,elem)</span></span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>3 3 3 3 3<br>3 3 3 3 3<br>2 2 2 2<br>2 2 2 2<br>3 3 3 3 3</p>
<hr>
<p><strong>总结： vector赋值方式比较简单，使用operator=，或者assign都可以</strong></p>
<h2 id="vector容量和大小"><a href="#vector容量和大小" class="headerlink" title="vector容量和大小"></a>vector容量和大小</h2><p>功能描述：对vector容器的容量和大小操作</p>
<h3 id="函数原型-2"><a href="#函数原型-2" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>bool empty();</td>
<td>判断容器是否为空</td>
</tr>
<tr>
<td>size_type capacity();</td>
<td>容器的容量</td>
</tr>
<tr>
<td>size_type size();</td>
<td>返回容器中元素的个数</td>
</tr>
<tr>
<td>void resize(int num);</td>
<td>重新指定容器的长度为num，若容器变长，则以默认值填充新位置；如果容器变短，则末尾超出容器长度的元素被删除</td>
</tr>
<tr>
<td>void resize(int num, int elem);</td>
<td>重新指定容器的长度为num，若容器变长，则以elem值填充新位置；如果容器变短，则末尾超出容器长度的元素被删除</td>
</tr>
<tr>
<td>void swap(vec);</td>
<td>将vec与本身的元素互换</td>
</tr>
</tbody></table>
<h3 id="函数示例-2"><a href="#函数示例-2" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(vector&lt;T&gt; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">5</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (v1.<span class="built_in">empty</span>()) cout &lt;&lt; boolalpha &lt;&lt; v1.<span class="built_in">empty</span>() &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">else</span> cout &lt;&lt; boolalpha &lt;&lt; v1.<span class="built_in">empty</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的容量: &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的大小: &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	v1.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">	v1.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line">	v1.<span class="built_in">push_back</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的容量: &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的大小: &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	v1.<span class="built_in">resize</span>(<span class="number">20</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的容量: &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的大小: &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	v1.<span class="built_in">resize</span>(<span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的容量: &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的大小: &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">	vector&lt;<span class="keyword">int</span>&gt;(v1).<span class="built_in">swap</span>(v1);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的容量: &quot;</span> &lt;&lt; v1.<span class="built_in">capacity</span>() &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;vector v1的大小: &quot;</span> &lt;&lt; v1.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//swap可以使两个容器互换，可以达到实用的收缩内存效果</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出示例：<br>false<br>vector v1的容量: 5<br>vector v1的大小: 5<br>vector v1的容量: 10<br>vector v1的大小: 8<br>vector v1的容量: 20<br>vector v1的大小: 20<br>vector v1的容量: 20<br>vector v1的大小: 5<br>vector v1的容量: 5<br>vector v1的大小: 5</p>
<hr>
<h2 id="vector插入和删除"><a href="#vector插入和删除" class="headerlink" title="vector插入和删除"></a>vector插入和删除</h2><p>功能描述：对vector容器进行插入、删除操作</p>
<h3 id="函数原型-3"><a href="#函数原型-3" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>void push_back(elem);</td>
<td>尾部插入元素elem</td>
</tr>
<tr>
<td>void pop_back();</td>
<td>删除最后一个元素</td>
</tr>
<tr>
<td>void insert(const_iterator pos,elem_type elem);</td>
<td>迭代器指向位置pos插入元素elem</td>
</tr>
<tr>
<td>void insert(const_iterator pos, int count,elem_type elem);</td>
<td>迭代器指向位置pos插入count个元素elem</td>
</tr>
<tr>
<td>void erase(const_iterator pos);</td>
<td>删除迭代器pos指向的元素</td>
</tr>
<tr>
<td>void erase(const_iterator start, const_iterator end);</td>
<td>删除迭代器从[start, end)之间的元素</td>
</tr>
<tr>
<td>void clear();</td>
<td>删除容器中所有元素</td>
</tr>
</tbody></table>
<h3 id="函数示例-3"><a href="#函数示例-3" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(vector&lt;T&gt; v)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.<span class="built_in">size</span>(); ++i) cout &lt;&lt; v[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">5</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">push_back</span>(<span class="number">4</span>);</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">pop_back</span>();</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">2</span>);</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">insert</span>(v1.<span class="built_in">begin</span>(), <span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">erase</span>(--v1.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">erase</span>(++v1.<span class="built_in">begin</span>(), --v1.<span class="built_in">end</span>());</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line">	v1.<span class="built_in">clear</span>();</span><br><span class="line">	<span class="built_in">print</span>(v1);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>3 3 3 3 3<br>3 3 3 3 3 4<br>3 3 3 3 3<br>2 3 3 3 3 3<br>1 1 1 2 3 3 3 3 3<br>1 1 1 2 3 3 3 3<br>1 3</p>
<hr>
<h2 id="vector数据存取"><a href="#vector数据存取" class="headerlink" title="vector数据存取"></a>vector数据存取</h2><p>功能描述：对vector中的数据的存取操作</p>
<h3 id="函数原型-4"><a href="#函数原型-4" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>at(int idx);</td>
<td>返回索引idx所指的数据</td>
</tr>
<tr>
<td>operator[](int idx);</td>
<td>返回索引idx所指的数据</td>
</tr>
<tr>
<td>front();</td>
<td>返回容器中第一个数据元素</td>
</tr>
<tr>
<td>back();</td>
<td>返回容器中最后一个数据元素</td>
</tr>
</tbody></table>
<h2 id="vector预留空间"><a href="#vector预留空间" class="headerlink" title="vector预留空间"></a>vector预留空间</h2><p>功能描述：减少vector在动态扩展容量时的扩展次数</p>
<h3 id="函数原型-5"><a href="#函数原型-5" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>reserve(int len);</td>
<td>容器预留len个元素长度，预留位置不初始化，元素不可访问。</td>
</tr>
</tbody></table>
<p><strong>如果数据量较大，可以一开始利用reserve预留空间</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/07/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B5-vector/" data-id="clca7m48y0021xog047o0gg2r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-右值引用和移动语义" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/05/%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/" class="article-date">
  <time datetime="2022-02-05T15:49:52.000Z" itemprop="datePublished">2022-02-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/05/%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/">右值引用和移动语义</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><h2 id="左值引用-amp"><a href="#左值引用-amp" class="headerlink" title="左值引用 &amp;"></a>左值引用 &amp;</h2><p>传统C++引用现在称为左值引用，使得标识符关联到左值<br>左值是一个表示数据的表达式(如<strong>变量名</strong>或<strong>解除引用的指针</strong>)，<strong>程序可获取其地址</strong>；<br>最初，左值可以出现在赋值语句的左边，但const修饰符的出现使得可以声明<strong>不能给其赋值但可以获取其地址</strong>的标识符</p>
<h2 id="右值引用-amp-amp"><a href="#右值引用-amp-amp" class="headerlink" title="右值引用 &amp;&amp;"></a>右值引用 &amp;&amp;</h2><p>C++11新增右值引用，使标识符可关联到右值<br>右值包括<strong>字面常量</strong>(C风格字符串除外，它表示地址)，诸如<strong>表达式x+y以及函数的返回值(返回的不是左值引用</strong>，程序不可以获取其地址<br>右值出现在表达式的右边</p>
<p><strong>将右值关联到右值引用导致该右值被储存到特定位置，且可以获取该位置的地址</strong><br>通过将数据与特定的地址关联，使得可以通过右值引用来访问该数据</p>
<hr>
<h3 id="右值引用测试"><a href="#右值引用测试" class="headerlink" title="右值引用测试"></a>右值引用测试</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">func</span><span class="params">(<span class="keyword">double</span> f)</span> </span>&#123; <span class="keyword">return</span> <span class="number">20</span> * (f - <span class="number">3.0</span>) / <span class="number">2.0</span>; &#125; <span class="comment">//返回的是一个右值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">double</span> f1 = <span class="number">1.2</span>; <span class="comment">//左值，程序可获取其地址</span></span><br><span class="line">	<span class="comment">//double&amp; f2 = 7.07; //7.07是一个常量，无法寻址，不可以左值引用</span></span><br><span class="line">	<span class="keyword">double</span>&amp;&amp; f3 = <span class="number">7.07</span>; <span class="comment">//7.07是一个常量，可以右值引用</span></span><br><span class="line">	<span class="keyword">double</span>&amp;&amp; f4 = <span class="number">1.8</span> * f1 + <span class="number">2.0</span>; <span class="comment">//表达式计算得到的值是一个临时值，无法寻址，右值引用</span></span><br><span class="line">	<span class="keyword">double</span>&amp;&amp; f5 = <span class="built_in">func</span>(f4); <span class="comment">//函数的返回值是一个临时值，无法寻址，右值引用</span></span><br><span class="line"></span><br><span class="line">	f5 = <span class="number">0.2</span>;<span class="comment">//关联func(f4)的返回值(右值)，但是可以赋值，说明当前的f5有自己的内存空间</span></span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f1 的值和地址为：&quot;</span> &lt;&lt; f1 &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; &amp;f1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f3 的值和地址为：&quot;</span> &lt;&lt; f3 &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; &amp;f3 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f4 的值和地址为：&quot;</span> &lt;&lt; f4 &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; &amp;f4 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;f5 的值和地址为：&quot;</span> &lt;&lt; f5 &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; &amp;f5 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>f1 的值和地址为：1.2    00B7FCC0<br>f3 的值和地址为：7.07   00B7FCA4<br>f4 的值和地址为：4.16   00B7FC88<br>f5 的值和地址为：11.6   00B7FC6C</p>
<hr>
<p><strong>引入右值引用的主要目的之一是实现移动语义</strong></p>
<h1 id="移动语义"><a href="#移动语义" class="headerlink" title="移动语义"></a>移动语义</h1><h2 id="移动语义概念"><a href="#移动语义概念" class="headerlink" title="移动语义概念"></a>移动语义概念</h2><p>在赋值时，首先要构造一个临时对象，然后再将对象赋值给新对象<br>在这期间，需要构造临时对象，对临时对象赋值，构造新对象，然后用临时对象对新对象赋值，且临时对象用过之后便销毁<br>若是能直接将新对象关联到临时对象，便省去大量时间和空间<br>移动语义便是：<strong>避免了原始数据的移动，只修改记录</strong>(悖论)</p>
<hr>
<p><strong>Tips:愚蠢的编译器</strong><br>函数返回临时变量赋值时，有些愚蠢的编译器甚至可能将函数内创建的临时变量复制给一个临时返回变量，然后删除临时变量，再删除临时返回变量</p>
<hr>
<h2 id="移动语义的实现"><a href="#移动语义的实现" class="headerlink" title="移动语义的实现"></a>移动语义的实现</h2><p>需要采用某种方式让编译器知道什么时候复制，什么时候不需要，此时便是右值引用发挥作用的时候了</p>
<h2 id="拷贝构造函数和移动构造函数"><a href="#拷贝构造函数和移动构造函数" class="headerlink" title="拷贝构造函数和移动构造函数"></a>拷贝构造函数和移动构造函数</h2><table>
<thead>
<tr>
<th>拷贝构造函数</th>
<th>移动构造函数</th>
</tr>
</thead>
<tbody><tr>
<td>可执行深拷贝</td>
<td>只负责调整记录</td>
</tr>
<tr>
<td>const左值引用</td>
<td>右值引用</td>
</tr>
<tr>
<td>不会修改实参，用const修饰</td>
<td>在将所有权转移给新对象的过程中，移动构造函数可能修改实参，所以不能用const修饰</td>
</tr>
</tbody></table>
<hr>
<h3 id="移动语义示例-移动构造函数"><a href="#移动语义示例-移动构造函数" class="headerlink" title="移动语义示例 移动构造函数"></a>移动语义示例 移动构造函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">useless</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">useless</span>();							<span class="comment">//default ctor</span></span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">useless</span><span class="params">(<span class="keyword">int</span> k)</span></span>;	</span><br><span class="line">	<span class="built_in">useless</span>(<span class="keyword">int</span> k, <span class="keyword">char</span> ch);</span><br><span class="line">	<span class="built_in">useless</span>(<span class="keyword">const</span> useless&amp; u);			<span class="comment">//copy ctor</span></span><br><span class="line">	<span class="built_in">useless</span>(useless&amp;&amp; u);				<span class="comment">//move ctor</span></span><br><span class="line">	~<span class="built_in">useless</span>();							<span class="comment">//default dtor</span></span><br><span class="line">	useless <span class="keyword">operator</span> + (<span class="keyword">const</span> useless&amp; u) <span class="keyword">const</span>;</span><br><span class="line">	<span class="comment">//need operator = () in copy and move versions</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowData</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> n;						<span class="comment">//number of element</span></span><br><span class="line">	<span class="keyword">char</span>* pc;					<span class="comment">//pointer to data</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> ct;				<span class="comment">//number of object</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowObject</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//implementation</span></span><br><span class="line"><span class="keyword">int</span> useless::ct = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>() &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	n = <span class="number">0</span>;</span><br><span class="line">	pc = <span class="literal">nullptr</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;default ctor called; number of objects: &quot;</span> &lt;&lt; ct &lt;&lt; endl;</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">int</span> k) : <span class="built_in">n</span>(k) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;int ctor called; number of objects: &quot;</span> &lt;&lt; ct &lt;&lt; endl;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">int</span> k, <span class="keyword">char</span> ch) :<span class="built_in">n</span>(k) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;int, char ctor called; number of objects: &quot;</span> &lt;&lt; ct &lt;&lt; endl;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pc[i] = ch;</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">const</span> useless&amp; u) :<span class="built_in">n</span>(u.n) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;copy const called; number of objects: &quot;</span> &lt;&lt; ct &lt;&lt; endl;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pc[i] = u.pc[i];</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//让pc指向现有数据，以获取这些数据的所有权</span></span><br><span class="line"><span class="comment">//将旧对象的指针设为nullptr，避免重复delete[]</span></span><br><span class="line"><span class="comment">//对nullptr delete[] 不会产生任何问题</span></span><br><span class="line"><span class="comment">//这种夺取所有权的方式被称为“窃取”(pilfering)</span></span><br><span class="line"><span class="comment">//由于修改了实参，所以参数不能声明为const</span></span><br><span class="line">useless::<span class="built_in">useless</span>(useless&amp;&amp; u) : <span class="built_in">n</span>(u.n) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;move ctor called; number of objects: &quot;</span> &lt;&lt; ct &lt;&lt; endl;</span><br><span class="line">	pc = u.pc;			<span class="comment">//steal address</span></span><br><span class="line">	u.pc = <span class="literal">nullptr</span>;		<span class="comment">//give old object nothing in return</span></span><br><span class="line">	u.n = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::~<span class="built_in">useless</span>()&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;dtor called; objects left: &quot;</span> &lt;&lt; --ct &lt;&lt; endl;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;deleted object:\n&quot;</span>;</span><br><span class="line">	<span class="built_in">ShowObject</span>();</span><br><span class="line">	<span class="keyword">delete</span>[] pc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless useless::<span class="keyword">operator</span> + (<span class="keyword">const</span> useless&amp; u) <span class="keyword">const</span> &#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Entering operator + ()\n&quot;</span>;</span><br><span class="line">	useless temp = <span class="built_in">useless</span>(n + u.n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) temp.pc[i] = pc[i];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &lt; temp.n; ++i) temp.pc[i] = u.pc[i - n];</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;temp object:\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Leaving operator + ()\n&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useless::ShowData</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!n) cout &lt;&lt; <span class="string">&quot;(object empty)&quot;</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cout &lt;&lt; pc[i];</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useless::ShowObject</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Number of elements: &quot;</span> &lt;&lt; n;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; Data address: &quot;</span> &lt;&lt; (<span class="keyword">void</span>*)pc &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//application</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">useless <span class="title">one</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;x&#x27;</span>)</span></span>;</span><br><span class="line">		useless two = one;			<span class="comment">//calls copy ctor</span></span><br><span class="line">		<span class="function">useless <span class="title">three</span><span class="params">(<span class="number">20</span>, <span class="string">&#x27;o&#x27;</span>)</span></span>;</span><br><span class="line">		<span class="function">useless <span class="title">four</span><span class="params">(one + three)</span></span>;	<span class="comment">//calls operator+(), move ctor</span></span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object one: &quot;</span>;</span><br><span class="line">		one.<span class="built_in">ShowData</span>();</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object two: &quot;</span>;</span><br><span class="line">		two.<span class="built_in">ShowData</span>();</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object three: &quot;</span>;</span><br><span class="line">		three.<span class="built_in">ShowData</span>();</span><br><span class="line"></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object four: &quot;</span>;</span><br><span class="line">		four.<span class="built_in">ShowData</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>示例输出：<br><strong>microsoft vs2019 msvc14.2</strong><br>int, char ctor called; number of objects: 1<br>Number of elements: 10 Data address: 006D22D8<br>copy const called; number of objects: 2<br>Number of elements: 10 Data address: 006D2268<br>int, char ctor called; number of objects: 3<br>Number of elements: 20 Data address: 006D10D8<br>Entering operator + ()<br>int ctor called; number of objects: 4<br>Number of elements: 30 Data address: 006CCF68<br>temp object:<br>Leaving operator + ()<br>move ctor called; number of objects: 5<br>Number of elements: 30 Data address: 006CCF68<br>dtor called; objects left: 4<br>deleted object:<br>Number of elements: 0 Data address: 00000000<br>object one: xxxxxxxxxx<br>object two: xxxxxxxxxx<br>object three: oooooooooooooooooooo<br>object four: xxxxxxxxxxoooooooooooooooooooo<br>dtor called; objects left: 3<br>deleted object:<br>Number of elements: 30 Data address: 006CCF68<br>dtor called; objects left: 2<br>deleted object:<br>Number of elements: 20 Data address: 006D10D8<br>dtor called; objects left: 1<br>deleted object:<br>Number of elements: 10 Data address: 006D2268<br>dtor called; objects left: 0<br>deleted object:<br>Number of elements: 10 Data address: 006D22D8</p>
<p><strong>vscode mingw64 g++ -std=c++11</strong><br>int, char ctor called; number of objects: 1<br>Number of elements: 10 Data address: 0xf53e30<br>copy const called; number of objects: 2<br>Number of elements: 10 Data address: 0xf53e70<br>int, char ctor called; number of objects: 3<br>Number of elements: 20 Data address: 0xf53eb0<br>Entering operator + ()<br>int ctor called; number of objects: 4<br>Number of elements: 30 Data address: 0xf53f00<br>temp object:<br>Leaving operator + ()<br>object one: xxxxxxxxxx<br>object two: xxxxxxxxxx<br>object three: oooooooooooooooooooo<br>object four: xxxxxxxxxxoooooooooooooooooooo<br>dtor called; objects left: 3<br>deleted object:<br>Number of elements: 30 Data address: 0xf53f00<br>dtor called; objects left: 2<br>deleted object:<br>Number of elements: 20 Data address: 0xf53eb0<br>dtor called; objects left: 1<br>deleted object:<br>Number of elements: 10 Data address: 0xf53e70<br>dtor called; objects left: 0<br>deleted object:<br>Number of elements: 10 Data address: 0xf53e30</p>
<hr>
<h3 id="示例总结"><a href="#示例总结" class="headerlink" title="示例总结"></a>示例总结</h3><p>msvc版本中可以看出调用了移动构造函数<br>mingw64 g++中没有调用移动构造函数(甚至在对象four创建时未调用任何构造函数)，它推断出operator+得到的结果的受益者是four，便将operator+创建的对象转移到four的名下</p>
<p><strong>一般而言，编译器完全可以进行优化，只要结果与未优化时相同</strong><br><strong>即使省略了程序中的移动构造函数，使用g++进行编译，结果也相同</strong></p>
<hr>
<p><strong>Tips:聪明的编译器</strong><br>g++看起来很聪明，那这些聪明会不会产生一些问题？2022/2/6</p>
<hr>
<h2 id="赋值函数和移动赋值函数"><a href="#赋值函数和移动赋值函数" class="headerlink" title="赋值函数和移动赋值函数"></a>赋值函数和移动赋值函数</h2><h3 id="强制移动"><a href="#强制移动" class="headerlink" title="强制移动"></a>强制移动</h3><p>如何像使用右值引用一样使用一个左值<br>1、运算符static_cast&lt;&gt;将对象的类型强制转换为右值引用<br>2、C++11头文件utility中声明的函数std::move()</p>
<h3 id="强制移动示例-移动赋值函数"><a href="#强制移动示例-移动赋值函数" class="headerlink" title="强制移动示例 移动赋值函数"></a>强制移动示例 移动赋值函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//强制移动</span></span><br><span class="line"><span class="comment">//1、运算符static_cast&lt;&gt;将对象的类型强制转换为右值引用</span></span><br><span class="line"><span class="comment">//2、C++11头文件utility中声明的函数std::move()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">useless</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">useless</span>();									<span class="comment">//default ctor</span></span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">useless</span><span class="params">(<span class="keyword">int</span> k)</span></span>;	</span><br><span class="line">	<span class="built_in">useless</span>(<span class="keyword">int</span> k, <span class="keyword">char</span> ch);</span><br><span class="line">	<span class="built_in">useless</span>(<span class="keyword">const</span> useless&amp; u);					<span class="comment">//copy ctor</span></span><br><span class="line">	<span class="built_in">useless</span>(useless&amp;&amp; u);						<span class="comment">//move ctor</span></span><br><span class="line">	~<span class="built_in">useless</span>();									<span class="comment">//default dtor</span></span><br><span class="line">	useless <span class="keyword">operator</span> + (<span class="keyword">const</span> useless&amp; u) <span class="keyword">const</span>;</span><br><span class="line">	useless <span class="keyword">operator</span> = (<span class="keyword">const</span> useless&amp; u);		<span class="comment">//copy assignment</span></span><br><span class="line">	useless <span class="keyword">operator</span> = (useless&amp;&amp; u);			<span class="comment">//move assignment</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowData</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">int</span> n;						<span class="comment">//number of element</span></span><br><span class="line">	<span class="keyword">char</span>* pc;					<span class="comment">//pointer to data</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> ct;				<span class="comment">//number of object</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">ShowObject</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//implementation</span></span><br><span class="line"><span class="keyword">int</span> useless::ct = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>() &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	n = <span class="number">0</span>;</span><br><span class="line">	pc = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">int</span> k) : <span class="built_in">n</span>(k) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">int</span> k, <span class="keyword">char</span> ch) :<span class="built_in">n</span>(k) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pc[i] = ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(<span class="keyword">const</span> useless&amp; u) :<span class="built_in">n</span>(u.n) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pc[i] = u.pc[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::<span class="built_in">useless</span>(useless&amp;&amp; u) : <span class="built_in">n</span>(u.n) &#123;</span><br><span class="line">	++ct;</span><br><span class="line">	pc = u.pc;			<span class="comment">//steal address</span></span><br><span class="line">	u.pc = <span class="literal">nullptr</span>;		<span class="comment">//give old object nothing in return</span></span><br><span class="line">	u.n = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless::~<span class="built_in">useless</span>()&#123;</span><br><span class="line">	<span class="keyword">delete</span>[] pc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless useless::<span class="keyword">operator</span> + (<span class="keyword">const</span> useless&amp; u) <span class="keyword">const</span> &#123;</span><br><span class="line">	useless temp = <span class="built_in">useless</span>(n + u.n);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) temp.pc[i] = pc[i];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &lt; temp.n; ++i) temp.pc[i] = u.pc[i - n];</span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless useless::<span class="keyword">operator</span>=(<span class="keyword">const</span> useless&amp; u) &#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;copy assignment operator called:\n&quot;</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;u) <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	<span class="keyword">delete</span>[] pc;</span><br><span class="line">	n = u.n;</span><br><span class="line">	pc = <span class="keyword">new</span> <span class="keyword">char</span>[n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) pc[i] = u.pc[i];</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">useless useless::<span class="keyword">operator</span> = (useless&amp;&amp; u) &#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;move assignment operator called:\n&quot;</span>;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> == &amp;u) <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	<span class="keyword">delete</span>[] pc;</span><br><span class="line">	n = u.n;</span><br><span class="line">	pc = u.pc;</span><br><span class="line">	u.n = <span class="number">0</span>;</span><br><span class="line">	u.pc = <span class="literal">nullptr</span>;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useless::ShowData</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!n) cout &lt;&lt; <span class="string">&quot;(object empty)&quot;</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cout &lt;&lt; pc[i];</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">useless::ShowObject</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Number of elements: &quot;</span> &lt;&lt; n;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot; Data address: &quot;</span> &lt;&lt; (<span class="keyword">void</span>*)pc &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//application</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">useless <span class="title">one</span><span class="params">(<span class="number">10</span>, <span class="string">&#x27;x&#x27;</span>)</span></span>;</span><br><span class="line">		useless two = one + one;			<span class="comment">//calls move ctor</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object one: &quot;</span>;</span><br><span class="line">		one.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;object two: &quot;</span>;</span><br><span class="line">		two.<span class="built_in">ShowData</span>();</span><br><span class="line"></span><br><span class="line">		useless three, four;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;three = one\n&quot;</span>;</span><br><span class="line">		three = one;						<span class="comment">//automatic copy assignment</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;now object three = &quot;</span>;</span><br><span class="line">		three.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;and object one = &quot;</span>;</span><br><span class="line">		one.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;four = one + two\n&quot;</span>;</span><br><span class="line">		four = one + two;					<span class="comment">//automatic move assignment</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;now object four = &quot;</span>;</span><br><span class="line">		four.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;four = move(one)\n&quot;</span>;</span><br><span class="line">		four = <span class="built_in">move</span>(one);					<span class="comment">//forced move assignment</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;now object four = &quot;</span>;</span><br><span class="line">		four.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;and object one = &quot;</span>;</span><br><span class="line">		one.<span class="built_in">ShowData</span>();</span><br><span class="line">		</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;\n---------------------\n&quot;</span>;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;four = static_cast&lt;useless&amp;&amp;&gt;(two)\n&quot;</span>;</span><br><span class="line">		four = <span class="keyword">static_cast</span>&lt;useless&amp;&amp;&gt;(two);	<span class="comment">//forced move assignment</span></span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;now object four = &quot;</span>;</span><br><span class="line">		four.<span class="built_in">ShowData</span>();</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;and object two = &quot;</span>;</span><br><span class="line">		two.<span class="built_in">ShowData</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出如下：<br>object one: xxxxxxxxxx<br>object two: xxxxxxxxxxxxxxxxxxxx<br>three = one<br>copy assignment operator called:<br>now object three = xxxxxxxxxx<br>and object one = xxxxxxxxxx<br>four = one + two<br>move assignment operator called:<br>now object four = xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br>four = move(one)<br>move assignment operator called:<br>now object four = xxxxxxxxxx<br>and object one = (object empty)</p>
<hr>
<p>four = static_cast&lt;useless&amp;&amp;&gt;(two)<br>move assignment operator called:<br>now object four = xxxxxxxxxxxxxxxxxxxx<br>and object two = (object empty)</p>
<hr>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>std::move()并非一定会导致移动操作<br>如果没有定义移动赋值运算符，编译器将使用复制赋值运算符<br>如果都没有定义，该操作不会被允许(自定义类型)</p>
<p><strong>目的：能够使用利用右值引用实现移动语义的库代码，Such as：STL</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/05/%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8%E5%92%8C%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/" data-id="clca7m48t001ixog0gw7a6pwv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/04/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B4/" class="article-date">
  <time datetime="2022-02-03T16:13:34.000Z" itemprop="datePublished">2022-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/04/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B4/">泛型编程4-string</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="string容器"><a href="#string容器" class="headerlink" title="string容器"></a>string容器</h1><h2 id="string基本概念"><a href="#string基本概念" class="headerlink" title="string基本概念"></a>string基本概念</h2><p>本质：string是C++风格的字符串，而string本质上是一个类</p>
<h2 id="string和char-的区别"><a href="#string和char-的区别" class="headerlink" title="string和char *的区别"></a>string和char *的区别</h2><p>char* 是一个指针<br>string是一个类，类内部封装了char*  ,管理这个字符串，是一个char*型的容器。</p>
<h2 id="string的特点"><a href="#string的特点" class="headerlink" title="string的特点"></a>string的特点</h2><p>string 类内部封装了很多成员方法<br>例如：查找find，拷贝copy，删除delete 替换replace，插入insert<br>string管理char*所分配的内存，不用担心复制越界和取值越界等，由类内部进行负责</p>
<h2 id="string构造函数"><a href="#string构造函数" class="headerlink" title="string构造函数"></a>string构造函数</h2><h3 id="构造函数原型"><a href="#构造函数原型" class="headerlink" title="构造函数原型"></a>构造函数原型</h3><p>其中size_type是一个依赖于实现的整型，可以理解为unsigned int<br>string::npos被string定义为字符串的最大长度</p>
<table>
<thead>
<tr>
<th>构造函数名称</th>
<th>构造函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>string(const char* s);</td>
<td>使用字符串s初始化</td>
</tr>
<tr>
<td></td>
<td>string(size_type n, char c);</td>
<td>使用n个字符c初始化</td>
</tr>
<tr>
<td>拷贝构造函数</td>
<td>string(const string&amp; str);</td>
<td>使用一个string对象初始化另一个string对象</td>
</tr>
<tr>
<td>默认构造函数</td>
<td>string();</td>
<td>创建一个空的字符串</td>
</tr>
<tr>
<td></td>
<td>string(const char* s, size_type n)</td>
<td>将string对象初始化为s指向的字符串的前n个字符，即使超过了s的结尾</td>
</tr>
<tr>
<td></td>
<td>template&lt;class Iter&gt;string(Iter begin, Iter end)</td>
<td>将string对象初始化为区间[begin,end)内的字符</td>
</tr>
<tr>
<td></td>
<td>string(const string&amp; str,size_type pos = 0, size_type n = npos)</td>
<td>将一个string对象初始化为string对象str从pos开始的n个字符</td>
</tr>
<tr>
<td>C++11新增 移动构造函数</td>
<td>string(string&amp;&amp; str)noexpect</td>
<td>将一个string对象初始化为string对象str，并可能修改str</td>
</tr>
<tr>
<td>C++11新增</td>
<td>string(initialzer_list<char> l)</td>
<td>将一个string对象初始化为初始化列表l中的字符</td>
</tr>
</tbody></table>
<h3 id="函数使用示例"><a href="#函数使用示例" class="headerlink" title="函数使用示例"></a>函数使用示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	<span class="keyword">char</span> s[] = <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line">	<span class="function">string <span class="title">str1</span><span class="params">(s)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str1 =\t&quot;</span> &lt;&lt; str1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	<span class="function">string <span class="title">str2</span><span class="params">(<span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str2 =\t&quot;</span> &lt;&lt; str2 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//3</span></span><br><span class="line">	<span class="comment">//string str3(str1);	//显式</span></span><br><span class="line">	string str3 = str1;		<span class="comment">//隐式</span></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str3 =\t&quot;</span> &lt;&lt; str3&lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//4</span></span><br><span class="line">	string str4;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str4 =\t&quot;</span> &lt;&lt; str4 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//5</span></span><br><span class="line">	<span class="function">string <span class="title">str5</span><span class="params">(s, <span class="number">7</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str5 =\t&quot;</span> &lt;&lt; str5 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//6</span></span><br><span class="line">	<span class="function">string <span class="title">str6</span><span class="params">(str1.begin(), str1.end())</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str6 =\t&quot;</span> &lt;&lt; str6 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//7</span></span><br><span class="line">	<span class="function">string <span class="title">str7</span><span class="params">(str1, <span class="number">1</span>, <span class="number">5</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str7 =\t&quot;</span> &lt;&lt; str7 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//8</span></span><br><span class="line">	<span class="function">string <span class="title">temp_str</span><span class="params">(<span class="string">&quot;tempary variable&quot;</span>)</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;temp_str = &quot;</span> &lt;&lt; temp_str &lt;&lt; endl;</span><br><span class="line">	<span class="function">string <span class="title">str8</span><span class="params">(move(temp_str))</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str8 =\t&quot;</span> &lt;&lt; str8 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;temp_str = &quot;</span> &lt;&lt; temp_str &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//9</span></span><br><span class="line">	string str9 = &#123; <span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;k&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;y&#x27;</span> &#125;;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str9 =\t&quot;</span> &lt;&lt; str9 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>str1 =  Hello, world!<br>str2 =  xxxxx<br>str3 =  Hello, world!<br>str4 =<br>str5 =  Hello,<br>str6 =  Hello, world!<br>str7 =  ello,<br>temp_str = tempary variable<br>str8 =  tempary variable<br>temp_str =<br>str9 =  okay</p>
<hr>
<h2 id="string赋值操作"><a href="#string赋值操作" class="headerlink" title="string赋值操作"></a>string赋值操作</h2><p>功能描述：给string字符串进行赋值</p>
<h3 id="赋值的函数原型"><a href="#赋值的函数原型" class="headerlink" title="赋值的函数原型"></a>赋值的函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>string&amp; operator=(const char* s);</td>
<td>char*类型字符串 赋值给当前的字符串</td>
</tr>
<tr>
<td>string&amp; operator=(const string &amp;s);</td>
<td>把字符串s赋给当前的字符串</td>
</tr>
<tr>
<td>string&amp; operator=(char c);</td>
<td>字符赋值给当前的字符串</td>
</tr>
<tr>
<td>string&amp; assign(const char *s);</td>
<td>把字符串s赋给当前的字符串</td>
</tr>
<tr>
<td>string&amp; assign(const char *s, int n);</td>
<td>把字符串s的前n个字符赋给当前的字符串</td>
</tr>
<tr>
<td>string&amp; assign(const string &amp;s);</td>
<td>把字符串s赋给当前字符串</td>
</tr>
<tr>
<td>string&amp; assign(int n, char c);</td>
<td>用n个字符c赋给当前字符串</td>
</tr>
</tbody></table>
<h3 id="赋值函数示例"><a href="#赋值函数示例" class="headerlink" title="赋值函数示例"></a>赋值函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> s[] = <span class="string">&quot;Hey, boy!&quot;</span>;</span><br><span class="line">	<span class="function">string <span class="title">str</span><span class="params">(<span class="string">&quot;Hello, world!&quot;</span>)</span></span>;</span><br><span class="line">	string str1, str2, str3, str4, str5, str6, str7;</span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	str1 = s;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str1 =\t&quot;</span> &lt;&lt; str1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	str2 = str;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str2 =\t&quot;</span> &lt;&lt; str2 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//3</span></span><br><span class="line">	str3 = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str3 =\t&quot;</span> &lt;&lt; str3&lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//4</span></span><br><span class="line">	str4.<span class="built_in">assign</span>(s);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str4 =\t&quot;</span> &lt;&lt; str4 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//5</span></span><br><span class="line">	str5.<span class="built_in">assign</span>(s, <span class="number">4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str5 =\t&quot;</span> &lt;&lt; str5 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//6</span></span><br><span class="line">	str6.<span class="built_in">assign</span>(str);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str6 =\t&quot;</span> &lt;&lt; str6 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//7</span></span><br><span class="line">	str7.<span class="built_in">assign</span>(<span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str7 =\t&quot;</span> &lt;&lt; str7 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>str1 =  Hey, boy!<br>str2 =  Hello, world!<br>str3 =  c<br>str4 =  Hey, boy!<br>str5 =  Hey,<br>str6 =  Hello, world!<br>str7 =  xxxxx</p>
<hr>
<h2 id="string字符串拼接"><a href="#string字符串拼接" class="headerlink" title="string字符串拼接"></a>string字符串拼接</h2><p>功能描述：实现在字符串末尾拼接字符串</p>
<h3 id="函数原型"><a href="#函数原型" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>string&amp; operator+=(const char* str);</td>
<td>重载+=操作符</td>
</tr>
<tr>
<td>string&amp; operator+=(const char c);</td>
<td>重载+=操作符</td>
</tr>
<tr>
<td>string&amp; operator+=(const string&amp; str);</td>
<td>重载+=操作符</td>
</tr>
<tr>
<td>string&amp; append(const char *s);</td>
<td>把字符串s连接到当前字符串结尾</td>
</tr>
<tr>
<td>string&amp; append(const char *s, int n);</td>
<td>把字符串s的前n个字符连接到当前字符串结尾</td>
</tr>
<tr>
<td>string&amp; append(const string &amp;s);</td>
<td>同operator+=(const string&amp; str)</td>
</tr>
<tr>
<td>string&amp; append(const string &amp;s, int pos, int n);</td>
<td>字符串s中从pos开始的n个字符连接到字符串结尾</td>
</tr>
</tbody></table>
<h3 id="函数示例"><a href="#函数示例" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">char</span> s[] = <span class="string">&quot;He siad:&quot;</span>;</span><br><span class="line">	string str = <span class="string">&quot;no one decides my fate but me.&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c char s[]\t=\t&quot;</span> &lt;&lt; s &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;c++ string str\t=\t&quot;</span> &lt;&lt; str &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	string str1 = <span class="string">&quot;str1&quot;</span>;</span><br><span class="line">	str1 += s;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str1 =\t&quot;</span> &lt;&lt; str1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	string str2 = <span class="string">&quot;str2&quot;</span>;</span><br><span class="line">	str2 += <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str2 =\t&quot;</span> &lt;&lt; str2 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//3</span></span><br><span class="line">	string str3 = <span class="string">&quot;str3&quot;</span>;</span><br><span class="line">	str3 += str;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str3 =\t&quot;</span> &lt;&lt; str3 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//4</span></span><br><span class="line">	string str4 = <span class="string">&quot;str4&quot;</span>;</span><br><span class="line">	str4.<span class="built_in">append</span>(s);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str4 =\t&quot;</span> &lt;&lt; str4 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//5</span></span><br><span class="line">	string str5 = <span class="string">&quot;str5&quot;</span>;</span><br><span class="line">	str5.<span class="built_in">append</span>(s, <span class="number">2</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str5 =\t&quot;</span> &lt;&lt; str5 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//6</span></span><br><span class="line">	string str6 = <span class="string">&quot;str6&quot;</span>;</span><br><span class="line">	str6.<span class="built_in">append</span>(str);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str6 =\t&quot;</span> &lt;&lt; str6 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//7</span></span><br><span class="line">	string str7 = <span class="string">&quot;str7&quot;</span>;</span><br><span class="line">	str7.<span class="built_in">append</span>(str, <span class="number">5</span>, <span class="number">20</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str7 =\t&quot;</span> &lt;&lt; str7 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>c char s[]      =       He siad:<br>c++ string str  =       no one decides my fate but me.<br>str1 =  str1He siad:<br>str2 =  str2x<br>str3 =  str3no one decides my fate but me.<br>str4 =  str4He siad:<br>str5 =  str5He<br>str6 =  str6no one decides my fate but me.<br>str7 =  str7e decides my fate bu</p>
<hr>
<h2 id="string查找和替换"><a href="#string查找和替换" class="headerlink" title="string查找和替换"></a>string查找和替换</h2><p>功能描述：<br>查找：查找指定字符串是否存在<br>替换：在指定的位置替换字符串</p>
<h3 id="函数原型-1"><a href="#函数原型-1" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>int find(const string&amp; str, int pos = 0) const;</td>
<td>查找str第一次出现位置,从pos开始查找</td>
</tr>
<tr>
<td>int find(const char* s, int pos = 0) const;</td>
<td>查找s第一次出现位置,从pos开始查找</td>
</tr>
<tr>
<td>int find(const char* s, int pos, int n) const;</td>
<td>从pos位置查找s的前n个字符第一次位置</td>
</tr>
<tr>
<td>int find(const char c, int pos = 0) const;</td>
<td>查找字符c第一次出现位置</td>
</tr>
<tr>
<td>int rfind(const string&amp; str, int pos = npos) const;</td>
<td>查找str最后一次位置,从pos开始查找</td>
</tr>
<tr>
<td>int rfind(const char* s, int pos = npos) const;</td>
<td>查找s最后一次出现位置,从pos开始查找</td>
</tr>
<tr>
<td>int rfind(const char* s, int pos, int n) const;</td>
<td>从pos查找s的前n个字符最后一次位置</td>
</tr>
<tr>
<td>int rfind(const char c, int pos = 0) const;</td>
<td>查找字符c最后一次出现位置</td>
</tr>
<tr>
<td>string&amp; replace(int pos, int n, const string&amp; str);</td>
<td>替换从pos开始n个字符为字符串str</td>
</tr>
<tr>
<td>string&amp; replace(int pos, int n,const char* s);</td>
<td>替换从pos开始的n个字符为字符串s</td>
</tr>
</tbody></table>
<p>总结：<br>1、find查找是从左往后，rfind从右往左；<br>2、find找到字符串后返回查找的第一个字符位置，找不到返回-1；<br>3、replace在替换时，要指定从哪个位置起，多少个字符，替换成什么样的字符串。</p>
<h3 id="函数示例-1"><a href="#函数示例-1" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	string str = <span class="string">&quot;abcabcabcabc&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> dex = str.<span class="built_in">rfind</span>(<span class="string">&quot;bc&quot;</span>,<span class="number">4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;dex =\t&quot;</span> &lt;&lt; dex &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	str.<span class="built_in">replace</span>(<span class="number">3</span>, <span class="number">6</span>, <span class="string">&quot;xyz&quot;</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str =\t&quot;</span> &lt;&lt; str &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>dex =   4          //从4到0，即使”bc”在4、5也会返回4<br>str =   abcxyzabc</p>
<hr>
<h2 id="string字符串比较"><a href="#string字符串比较" class="headerlink" title="string字符串比较"></a>string字符串比较</h2><p>功能描述：字符串之间的比较<br>比较方式：字符串比较是按字符的ASCII码进行对比<br>比较结果：<br>= 返回 0</p>
<blockquote>
<p>返回 1<br>&lt; 返回 -1</p>
</blockquote>
<h3 id="函数原型-2"><a href="#函数原型-2" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>int compare(const string &amp;str) const;</td>
<td>与字符串str比较</td>
</tr>
<tr>
<td>int compare(const char *s) const;</td>
<td>与字符串s比较</td>
</tr>
</tbody></table>
<h3 id="函数示例-2"><a href="#函数示例-2" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	string str1 = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">	string str2 = <span class="string">&quot;cd&quot;</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> ret = str1.<span class="built_in">compare</span>(str2);</span><br><span class="line">	<span class="keyword">if</span> (ret &lt; <span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;str1 &lt; str2\n&quot;</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (ret == <span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;str1 == str2\n&quot;</span>;</span><br><span class="line">	<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;str1&gt;str2\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>str1 &lt; str2 //按位比较ASCII码</p>
<hr>
<h2 id="string字符存取"><a href="#string字符存取" class="headerlink" title="string字符存取"></a>string字符存取</h2><p>string中单个字符存取方式有两种</p>
<h3 id="函数原型-3"><a href="#函数原型-3" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>char&amp; operator[](int n);</td>
<td>通过[]方式取字符</td>
</tr>
<tr>
<td>char&amp; at(int n);</td>
<td>通过at方法获取字符</td>
</tr>
</tbody></table>
<h2 id="string插入和删除"><a href="#string插入和删除" class="headerlink" title="string插入和删除"></a>string插入和删除</h2><p>功能描述：对string字符串进行插入和删除字符操作</p>
<h3 id="函数原型-4"><a href="#函数原型-4" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>string&amp; insert(int pos, const char* s);</td>
<td>插入字符串</td>
</tr>
<tr>
<td>string&amp; insert(int pos, const string&amp; str);</td>
<td>插入字符串</td>
</tr>
<tr>
<td>string&amp; insert(int pos, int n, char c);</td>
<td>在指定位置插入n个字符c</td>
</tr>
<tr>
<td>string&amp; erase(int pos, int n = npos);</td>
<td>删除从Pos开始的n个字符</td>
</tr>
</tbody></table>
<h3 id="函数示例-3"><a href="#函数示例-3" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	string str = <span class="string">&quot;aa&quot;</span>;</span><br><span class="line">	<span class="keyword">char</span> s[] = <span class="string">&quot;bb&quot;</span>;</span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	string str1 = str.<span class="built_in">insert</span>(<span class="number">1</span>, s);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str1 =\t&quot;</span> &lt;&lt; str1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	string str2 = str.<span class="built_in">insert</span>(<span class="number">1</span>, str);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str2 =\t&quot;</span> &lt;&lt; str2 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//3</span></span><br><span class="line">	string str3 = str.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="number">5</span>, <span class="string">&#x27;x&#x27;</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str3 =\t&quot;</span> &lt;&lt; str3 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="comment">//4</span></span><br><span class="line">	string str4 = str.<span class="built_in">erase</span>(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;str4 =\t&quot;</span> &lt;&lt; str4 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>str1 =  abba<br>str2 =  aabbabba<br>str3 =  axxxxxabbabba<br>str4 =  axabbabba</p>
<hr>
<h2 id="string子串"><a href="#string子串" class="headerlink" title="string子串"></a>string子串</h2><p>功能描述：从字符串中获取想要的子串</p>
<h3 id="函数原型-5"><a href="#函数原型-5" class="headerlink" title="函数原型"></a>函数原型</h3><table>
<thead>
<tr>
<th>函数原型</th>
<th>函数说明</th>
</tr>
</thead>
<tbody><tr>
<td>string substr(int pos = 0, int n = npos) const;</td>
<td>返回由pos开始的n个字符组成的字符串</td>
</tr>
</tbody></table>
<h3 id="函数示例-4"><a href="#函数示例-4" class="headerlink" title="函数示例"></a>函数示例</h3><hr>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	string str = <span class="string">&quot;shallows.github.io&quot;</span>;</span><br><span class="line">	string sub_str = <span class="built_in">move</span>(str.<span class="built_in">substr</span>(<span class="number">0</span>, str.<span class="built_in">find</span>(<span class="string">&#x27;.&#x27;</span>)));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;sub_str = &quot;</span> &lt;&lt; sub_str &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：<br>sub_str = shallows</p>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/04/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B4/" data-id="clca7m48x001wxog0es9v3oli" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/03/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B3/" class="article-date">
  <time datetime="2022-02-03T09:52:08.000Z" itemprop="datePublished">2022-02-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/03/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B3/">泛型编程3-STL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="STL的诞生"><a href="#STL的诞生" class="headerlink" title="STL的诞生"></a>STL的诞生</h1><p>长久以来，软件界一直希望建立一种可重复利用的东西<br>C++的面向对象和泛型编程思想，目的就是复用性的提升<br>大多情况下，数据结构和算法都未能有一套标准,导致被迫从事大量重复工作<br>为了建立数据结构和算法的一套标准,诞生了STL</p>
<h2 id="STL基本概念"><a href="#STL基本概念" class="headerlink" title="STL基本概念"></a>STL基本概念</h2><p>STL(Standard Template Library,标准模板库)<br>STL从广义上分为:容器(container)算法(algorithm)迭代器(iterator)<br>容器和算法之间通过迭代器进行无缝连接。<br>STL几乎所有的代码都采用了模板类或者模板函数</p>
<h2 id="STL六大组件"><a href="#STL六大组件" class="headerlink" title="STL六大组件"></a>STL六大组件</h2><p>STL大体分为六大组件,分别是:<strong>容器</strong>、<strong>算法</strong>、<strong>迭代器</strong>、<strong>仿函数</strong>、<strong>适配器(配接器)</strong> 、<strong>空间配置器</strong></p>
<p>1、容器:各种数据结构，如vector、list、deque、set、map等,用来存放数据。<br>2、算法:各种常用的算法，如sort、 find、copy、for_each等<br>3、迭代器:扮演了容器与算法之间的胶合剂。<br>4、仿函数:行为类似函数，可作为算法的某种策略。<br>5、适配器:一种用来修饰容器或者仿函数或迭代器接口的东西。<br>6、空间配置器:负责空间的配置与管理。</p>
<h2 id="STL中容器、算法、迭代器"><a href="#STL中容器、算法、迭代器" class="headerlink" title="STL中容器、算法、迭代器"></a>STL中容器、算法、迭代器</h2><h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p><strong>置物之所也</strong><br>STL容器就是将运用最广泛的一些数据结构实现出来<br>常用的数据结构：数组,链表,树,栈,队列,集合,映射表等</p>
<h3 id="容器分类"><a href="#容器分类" class="headerlink" title="容器分类"></a>容器分类</h3><p>这些容器分为<strong>序列式容器</strong>和<strong>关联式容器</strong>两种:<br>​序列式容器:强调值的排序，序列式容器中的每个元素均有固定的位置。<br>关联式容器:二叉树结构，各元素之间没有严格的物理上的顺序关系</p>
<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p><strong>问题之解法也</strong><br>有限的步骤，解决逻辑或数学上的问题，这一门学科我们叫做算法(Algorithms)</p>
<h3 id="算法分类"><a href="#算法分类" class="headerlink" title="算法分类"></a>算法分类</h3><p>算法分为: <strong>质变算法</strong>和<strong>非质变算法</strong>。<br>质变算法：  是指运算过程中会更改区间内的元素的内容。例如拷贝，替换，删除等等<br>非质变算法：是指运算过程中不会更改区间内的元素内容，例如查找、计数、遍历、寻找极值等等</p>
<h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h3><p><strong>容器和算法之间粘合剂</strong><br>提供一种方法，使之能够依序寻访某个容器所含的各个元素，而又无需暴露该容器的内部表示方式。<br>每个容器都有自己专属的迭代器<br>迭代器使用非常类似于指针，初学阶段我们可以先理解迭代器为指针</p>
<h2 id="迭代器种类"><a href="#迭代器种类" class="headerlink" title="迭代器种类"></a>迭代器种类</h2><table>
<thead>
<tr>
<th>种类</th>
<th>功能</th>
<th>支持运算</th>
</tr>
</thead>
<tbody><tr>
<td>输入迭代器</td>
<td>对数据的只读访问</td>
<td>只读，支持++、==、！=</td>
</tr>
<tr>
<td>输出迭代器</td>
<td>对数据的只写访问</td>
<td>只写，支持++</td>
</tr>
<tr>
<td>前向迭代器</td>
<td>读写操作，并能向前推进迭代器</td>
<td>读写，支持++、==、！=</td>
</tr>
<tr>
<td>双向迭代器</td>
<td>读写操作，并能向前和向后操作</td>
<td>读写，支持++、–</td>
</tr>
<tr>
<td>随机访问迭代器</td>
<td>读写操作，可以以跳跃的方式访问任意数据，功能最强的迭代器</td>
<td>读写，支持++、–、[n]、-n、&lt;、&lt;=、&gt;、&gt;=</td>
</tr>
</tbody></table>
<p>常用的容器中迭代器种类为<strong>双向迭代器</strong>和<strong>随机访问迭代器</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/03/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B3/" data-id="clca7m48v001rxog0abtdf8sg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B2/" class="article-date">
  <time datetime="2022-02-01T12:00:17.000Z" itemprop="datePublished">2022-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B2/">泛型编程2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h2><p>建立一个通用类,类中的成员数据类型可以不具体制定，用一个虚拟的类型来代表。</p>
<h2 id="类模板可以使用类型默认参数"><a href="#类模板可以使用类型默认参数" class="headerlink" title="类模板可以使用类型默认参数"></a>类模板可以使用类型默认参数</h2><p>函数模板不可以使用类型默认参数</p>
<h2 id="类模板中成员函数和普通类中成员函数创建时机是有区别的"><a href="#类模板中成员函数和普通类中成员函数创建时机是有区别的" class="headerlink" title="类模板中成员函数和普通类中成员函数创建时机是有区别的:"></a>类模板中成员函数和普通类中成员函数创建时机是有区别的:</h2><p>1、普通类中的成员函数一开始就可以创建<br>2、类模板中的成员函数在调用时才创建</p>
<h2 id="类模板对象做函数参数"><a href="#类模板对象做函数参数" class="headerlink" title="类模板对象做函数参数"></a>类模板对象做函数参数</h2><p>类模板实例化出的对象，向函数传参的方式<br>共有三种传入方式:<br>1.指定传入的类型– 直接显示对象的数据类型<br>2.参数模板化– 将对象 中的参数变为模板进行传递<br>3.整个类模板化— 将这个对象类型模板化进行传递</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类模板对象做函数参数</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; cout &lt;&lt; <span class="string">&quot;姓名：&quot;</span> &lt;&lt; _name &lt;&lt; <span class="string">&quot; 年龄： &quot;</span> &lt;&lt; _age &lt;&lt; <span class="string">&quot;\n&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">    T1 _name;</span><br><span class="line">    T2 _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.指定传入类型</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPerson1</span><span class="params">(<span class="keyword">const</span> person&lt;string, <span class="keyword">int</span>&gt;&amp; p)</span> </span>&#123; </span><br><span class="line">    p.<span class="built_in">ShowPerson</span>(); </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;T1的类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(string).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;T2的类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(<span class="keyword">int</span>).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、参数模板化</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1,<span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPerson2</span><span class="params">(<span class="keyword">const</span> person&lt;T1, T2&gt;&amp; p)</span> </span>&#123;</span><br><span class="line">    p.<span class="built_in">ShowPerson</span>(); </span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;T1的类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T1).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;T2的类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T2).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、整个类模板化</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPerson3</span><span class="params">(<span class="keyword">const</span> T&amp; p)</span> </span>&#123;</span><br><span class="line">    p.<span class="built_in">ShowPerson</span>();</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;T的类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;齐天大圣&quot;</span>, INT32_MAX)</span></span>;</span><br><span class="line">    <span class="built_in">PrintPerson1</span>(p1);</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="string">&quot;天蓬元帅&quot;</span>, INT32_MAX)</span></span>;</span><br><span class="line">    <span class="built_in">PrintPerson2</span>(p2);</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p3</span><span class="params">(<span class="string">&quot;金蝉子&quot;</span>, INT32_MIN)</span></span>;</span><br><span class="line">    <span class="built_in">PrintPerson3</span>(p3);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用比较广泛是第一种:指定传入的类型</strong></p>
<h2 id="类模板与继承"><a href="#类模板与继承" class="headerlink" title="类模板与继承"></a>类模板与继承</h2><p>当类模板碰到继承时，需要注意一下几点:<br>1、当子类继承的父类是一个类模板时，子类在声明的时候，要指定出父类中T的类型<br>2、如果不指定,编译器无法给子类分配内存<br>3、如果想灵活指定出父类中T的类型，子类也需变为类模板</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类模板与继承</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">base</span> &#123;</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定继承模板类的类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">drived1</span> :</span> <span class="keyword">public</span> base&lt;<span class="keyword">int</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类也变成类模板，可以灵活的指定T的类型</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">drived2</span> :</span> <span class="keyword">public</span> base&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">drived3</span> :</span> <span class="keyword">public</span> base&lt;T1&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">drived3</span>() &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;T1的数据类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T1).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;T2的数据类型为：&quot;</span> &lt;&lt; <span class="built_in"><span class="keyword">typeid</span></span>(T2).<span class="built_in">name</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    T2 _obj;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    drived3&lt;<span class="keyword">int</span>, <span class="keyword">char</span>&gt; d;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="类模板成员函数类外实现"><a href="#类模板成员函数类外实现" class="headerlink" title="类模板成员函数类外实现"></a>类模板成员函数类外实现</h2><p>类模板中成员函数类外实现时，需要加上模板参数列表</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类模板成员函数的类外实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age);</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T1 _name;</span><br><span class="line">    T2 _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造函数的类外实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line">person&lt;T1, T2&gt;::<span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//成员函数的类外实现</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="keyword">void</span> person&lt;T1, T2&gt;::<span class="built_in">ShowPerson</span>() <span class="keyword">const</span> &#123; cout &lt;&lt; _name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; _age &lt;&lt; <span class="string">&quot;\n&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Cash&quot;</span>, <span class="number">33</span>)</span></span>;</span><br><span class="line">    p.<span class="built_in">ShowPerson</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="类模板分文件编写"><a href="#类模板分文件编写" class="headerlink" title="类模板分文件编写"></a>类模板分文件编写</h2><p>类模板成员函数分文件编写产生的问题以及解决方式<br>问题:类模板中成员函数创建时机是在调用阶段，导致分文件编写时链接不到<br>解决方式1:直接包含.cpp源文件<br>解决方式2:将声明和实现写到同一个文件中，并更改后缀名为.hpp, hpp是约定的名称，并不是强制</p>
<h3 id="主流解决方案person-hpp"><a href="#主流解决方案person-hpp" class="headerlink" title="主流解决方案person.hpp"></a>主流解决方案person.hpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age);</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ShowPerson</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T1 _name;</span><br><span class="line">    T2 _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line">person&lt;T1, T2&gt;::<span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="keyword">void</span> person&lt;T1, T2&gt;::<span class="built_in">ShowPerson</span>() <span class="keyword">const</span> &#123; cout &lt;&lt; _name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; _age &lt;&lt; <span class="string">&quot;\n&quot;</span>; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="mian-cpp"><a href="#mian-cpp" class="headerlink" title="mian.cpp"></a>mian.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="comment">//#include &quot;person.h&quot; //无法链接</span></span><br><span class="line"><span class="comment">//#include &quot;person.cpp&quot; //解决方案1：直接包含.cpp文件</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;person.hpp&quot;</span> <span class="comment">//解决方案2：将模板类声明和实现写在一个文件中，改为.hpp</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p</span><span class="params">(<span class="string">&quot;Cash&quot;</span>, <span class="number">33</span>)</span></span>;</span><br><span class="line">    p.<span class="built_in">ShowPerson</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="类模板与友元"><a href="#类模板与友元" class="headerlink" title="类模板与友元"></a>类模板与友元</h2><p>类模板配合友元函数的类内和类外实现<br>全局函数类内实现-直接在类内声明友元即可<br>全局函数类外实现-需要提前让编译器知道全局函数的存在</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模板类前置声明</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局模板函数前置声明</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPerson2</span><span class="params">(<span class="keyword">const</span> person&lt;T1, T2&gt;&amp; p)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">person</span>(<span class="keyword">const</span> T1&amp; name, <span class="keyword">const</span> T2&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全局函数类内实现</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">PrintPerson1</span><span class="params">(<span class="keyword">const</span> person&lt;T1, T2&gt;&amp; p)</span> </span>&#123; cout &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age &lt;&lt; <span class="string">&quot;\n&quot;</span>; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全局模板函数类内声明为友元，加空模板列表</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">void</span> PrintPerson2&lt;&gt;(<span class="keyword">const</span> person&lt;T1, T2&gt;&amp; p);</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T1 _name;</span><br><span class="line">    T2 _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局模板函数类外实现 加模板列表</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintPerson2</span><span class="params">(<span class="keyword">const</span> person&lt;T1, T2&gt;&amp; p)</span> </span>&#123; cout &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age &lt;&lt; <span class="string">&quot;\n&quot;</span>; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p1</span><span class="params">(<span class="string">&quot;Jack&quot;</span>, <span class="number">24</span>)</span></span>;</span><br><span class="line">    <span class="built_in">PrintPerson1</span>(p1);</span><br><span class="line"></span><br><span class="line">    <span class="function">person&lt;string, <span class="keyword">int</span>&gt; <span class="title">p2</span><span class="params">(<span class="string">&quot;Rose&quot;</span>, <span class="number">23</span>)</span></span>;</span><br><span class="line">    <span class="built_in">PrintPerson2</span>(p2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="类模板案例"><a href="#类模板案例" class="headerlink" title="类模板案例"></a>类模板案例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类模板案例</span></span><br><span class="line"><span class="comment">//案例描述 : 实现一个通用的数组类，要求如下:</span></span><br><span class="line"><span class="comment">//可以对内置数据类型以及自定来数据类型的数据进行存储</span></span><br><span class="line"><span class="comment">//将数组中的数据存储到堆区</span></span><br><span class="line"><span class="comment">//构造函数中可以传入数组的容量</span></span><br><span class="line"><span class="comment">//提供对应的拷贝构造函数以及operator = 防止浅拷贝问题</span></span><br><span class="line"><span class="comment">//提供尾插法和尾删法对数组中的数据进行增加和删除</span></span><br><span class="line"><span class="comment">//可以通过下标的方式访问数组中的元素</span></span><br><span class="line"><span class="comment">//可以获取数组中当前元素个数和数组的容量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;	<span class="class"><span class="keyword">class</span> <span class="title">myvector</span>;</span></span><br><span class="line">						<span class="class"><span class="keyword">class</span> <span class="title">person</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myvector</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="comment">//构造函数</span></span><br><span class="line">	<span class="built_in">myvector</span>(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span>&amp; capacity = <span class="number">0</span>) : _capacity(capacity), _size(<span class="number">0</span>) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;构造函数\n&quot;</span>;</span><br><span class="line">		<span class="keyword">if</span> (_capacity &gt; <span class="number">0</span>) _array = <span class="keyword">new</span> T[_capacity];</span><br><span class="line">		<span class="keyword">else</span> _array = <span class="literal">nullptr</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//拷贝构造函数</span></span><br><span class="line">	<span class="built_in">myvector</span>(<span class="keyword">const</span> myvector&amp; vec) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;拷贝函数\n&quot;</span>;</span><br><span class="line">		_size = vec._size;</span><br><span class="line">		_capacity = vec._capacity;</span><br><span class="line">		_array = <span class="keyword">new</span> T[vec._capacity];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec._size; ++i) _array[i] = vec._array[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//赋值函数</span></span><br><span class="line">	myvector&amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> myvector&amp; vec) &#123;</span><br><span class="line">		cout &lt;&lt; <span class="string">&quot;赋值函数\n&quot;</span>;</span><br><span class="line">		_size = vec._size;</span><br><span class="line">		_capacity = vec._capacity;</span><br><span class="line">		<span class="keyword">if</span> (_array != <span class="literal">nullptr</span>) <span class="keyword">delete</span>[] _array;</span><br><span class="line">		_array = <span class="keyword">new</span> T[vec._capacity];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec._size; ++i) _array[i] = vec._array[i];</span><br><span class="line">		<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//重载中括号</span></span><br><span class="line">	T&amp; <span class="keyword">operator</span> [] (<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span>&amp; index) <span class="keyword">const</span> &#123;</span><br><span class="line">		<span class="comment">/*if (index &lt; 0 || index &gt;= _size) return;</span></span><br><span class="line"><span class="comment">		else*/</span> <span class="keyword">return</span> _array[index];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//返回当前数组大小</span></span><br><span class="line">	<span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span>     <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _size; &#125;</span><br><span class="line">	<span class="comment">//返回当前容器大小</span></span><br><span class="line">	<span class="function"><span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="title">capacity</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> _capacity; &#125;</span><br><span class="line">	<span class="comment">//尾插</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">push_back</span><span class="params">(<span class="keyword">const</span> T&amp; elem)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (_size &lt; _capacity) _array[_size++] = elem;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">add_capacity</span>();</span><br><span class="line">			_array[_size++] = elem;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//尾删</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">pop_back</span><span class="params">()</span> </span>&#123; </span><br><span class="line">		<span class="keyword">if</span> (_size == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">		_array[_size-- - <span class="number">1</span>] = <span class="number">0</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//打印数组内容</span></span><br><span class="line">	<span class="function"><span class="keyword">friend</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> myvector&amp; vec)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vec.<span class="built_in">size</span>(); ++i) cout &lt;&lt; vec._array[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//析构函数</span></span><br><span class="line">	~<span class="built_in">myvector</span>() &#123;</span><br><span class="line">		<span class="keyword">if</span> (_array != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">			<span class="keyword">delete</span>[] _array;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> _size;     <span class="comment">//当前数组大小</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> _capacity; <span class="comment">//当前容器大小</span></span><br><span class="line">	T* _array;    <span class="comment">//堆区数组指针</span></span><br><span class="line">	<span class="comment">//容器扩展</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">add_capacity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> len = <span class="built_in">log2</span>(_capacity) + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">unsigned</span> <span class="keyword">int</span> newcapacity = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i) newcapacity &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">		T* newarray = <span class="keyword">new</span> T[newcapacity];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _size; ++i) newarray[i] = _array[i];</span><br><span class="line">		<span class="keyword">delete</span>[] _array;</span><br><span class="line">		_array = newarray;</span><br><span class="line">		_capacity = newcapacity;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//修改当前数组大小</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">size</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span>&amp; size)</span> </span>&#123; _size = size; &#125;</span><br><span class="line">	<span class="comment">//修改当前容器大小</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">capacity</span><span class="params">(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span>&amp; capacity)</span> </span>&#123; _capacity = capacity; &#125;</span><br><span class="line">	<span class="comment">//修改当前数组指针指向</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">array</span><span class="params">(T* <span class="keyword">const</span> array)</span> </span>&#123; _array = array; &#125;</span><br><span class="line">	<span class="comment">//释放当前数组指针指向的内存</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">delete_array</span><span class="params">()</span> </span>&#123; <span class="keyword">delete</span>[] _array; _array = <span class="literal">nullptr</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name = <span class="string">&quot;&quot;</span>, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age = <span class="number">-1</span>);</span><br><span class="line">	<span class="built_in">person</span>(<span class="keyword">const</span> person&amp; p);</span><br><span class="line">	person&amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> person&amp; p);</span><br><span class="line">	<span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p);</span><br><span class="line">	~<span class="built_in">person</span>();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	string _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line">person::<span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age) :_name(name), _age(age) &#123; cout &lt;&lt; <span class="string">&quot;person构造函数\n&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">person::<span class="built_in">person</span>(<span class="keyword">const</span> person&amp; p) : _name(p._name), _age(p._age) &#123; cout &lt;&lt; <span class="string">&quot;person拷贝函数\n&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">person&amp; person::<span class="keyword">operator</span> = (<span class="keyword">const</span> person&amp; p)&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;person赋值函数\n&quot;</span>;</span><br><span class="line">	_name = p._name;</span><br><span class="line">	_age = p._age;</span><br><span class="line">	<span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person::~<span class="built_in">person</span>() &#123; cout &lt;&lt; <span class="string">&quot;析构函数\n&quot;</span>; &#125;</span><br><span class="line"></span><br><span class="line">ostream&amp; <span class="keyword">operator</span> &lt;&lt; (ostream&amp; os, <span class="keyword">const</span> person&amp; p) &#123;</span><br><span class="line">	<span class="keyword">return</span> os &lt;&lt; p._name &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; p._age &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数字转换成字符串</span></span><br><span class="line"><span class="function">string <span class="title">numtostring</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">	string str;</span><br><span class="line">	<span class="keyword">while</span> (num) &#123;</span><br><span class="line">		str.<span class="built_in">push_back</span>(num % <span class="number">10</span> + <span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">		num /= <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">reverse</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>());</span><br><span class="line">	<span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">myvector&lt;<span class="keyword">int</span>&gt; <span class="title">vec1</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) vec1.<span class="built_in">push_back</span>(<span class="built_in">rand</span>() % <span class="number">256</span>);</span><br><span class="line">	<span class="built_in">print</span>(vec1);</span><br><span class="line">    vec1[<span class="number">2</span>] = <span class="number">8</span>; <span class="comment">//重载[]返回引用，类外可修改堆区内存中的内容</span></span><br><span class="line">	<span class="built_in">print</span>(vec1);</span><br><span class="line"></span><br><span class="line">	<span class="function">myvector&lt;<span class="keyword">double</span>&gt; <span class="title">vec2</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) vec2.<span class="built_in">push_back</span>(<span class="built_in">rand</span>() % <span class="number">256</span> / <span class="number">7.0</span>);</span><br><span class="line">	<span class="built_in">print</span>(vec2);</span><br><span class="line"></span><br><span class="line">	<span class="function">myvector&lt;string&gt; <span class="title">vec3</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) vec3.<span class="built_in">push_back</span>(<span class="built_in">numtostring</span>(<span class="built_in">rand</span>() % <span class="number">256</span> + <span class="number">1024</span>));</span><br><span class="line">	<span class="built_in">print</span>(vec3);</span><br><span class="line"></span><br><span class="line">	myvector&lt;<span class="keyword">int</span>&gt; vec4 = vec1;</span><br><span class="line">	<span class="built_in">print</span>(vec4);</span><br><span class="line"></span><br><span class="line">	<span class="function">myvector&lt;<span class="keyword">int</span>&gt; <span class="title">vec5</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">	vec5 = vec4 = vec1;</span><br><span class="line">	<span class="built_in">print</span>(vec5);</span><br><span class="line"></span><br><span class="line">	<span class="function">myvector&lt;person&gt; <span class="title">vec6</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;1\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">23</span>));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;2\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张四&quot;</span>,<span class="number">22</span>));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;3\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张五&quot;</span>,<span class="number">21</span>));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;4\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张六&quot;</span>,<span class="number">20</span>));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;5\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张七&quot;</span>,<span class="number">24</span>));</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;6\n&quot;</span>;</span><br><span class="line">	vec6.<span class="built_in">push_back</span>(<span class="built_in">person</span>(<span class="string">&quot;张八&quot;</span>,<span class="number">26</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">print</span>(vec6);</span><br><span class="line"></span><br><span class="line">	myvector&lt;person&gt; vec7 = vec6;</span><br><span class="line">	<span class="built_in">print</span>(vec7);</span><br><span class="line"></span><br><span class="line">	myvector&lt;person&gt; vec8;</span><br><span class="line">	vec8 = vec7;</span><br><span class="line">	<span class="built_in">print</span>(vec8);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B2/" data-id="clca7m48w001uxog0ei96746r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-泛型编程1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B1/" class="article-date">
  <time datetime="2022-01-31T16:03:01.000Z" itemprop="datePublished">2022-02-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B1/">泛型编程1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><p>C++另一种编程思想称为泛型编程，主要利用的技术就是模板</p>
<h2 id="模板的概念"><a href="#模板的概念" class="headerlink" title="模板的概念"></a>模板的概念</h2><p>模板就是建立通用的模具，大大提高复用性</p>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><p>建立一个通用函数，其函数返回值类型和形参类型可以不具体制定，用一个虚拟的类型来代表。<br>语法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br></pre></td></tr></table></figure>
<p>函数声明或定义类<br>解释:<br>template –声明创建模板<br>typename – 表面其后面的符号是一种数据类型， 可以用<strong>class代替</strong><br>T — 通用的数据类型,名称可以替换，通常为大写字母</p>
<h2 id="模板分类"><a href="#模板分类" class="headerlink" title="模板分类"></a>模板分类</h2><p>C++提供两种模板机制:函数模板和类模板</p>
<h2 id="函数模板使用方法"><a href="#函数模板使用方法" class="headerlink" title="函数模板使用方法"></a>函数模板使用方法</h2><p>1、自动类型推导<br>2、显式指定类型</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1、函数模板利用关键字template<br>2、使用函数模板有两种方式:自动类型推导、显示指定类型<br>3、模板的目的是为了提高复用性，将类型参数伤</p>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>1、自动类型推导，必须推导出一致的数据类型T,才可以使用<br>2、模板必须要确定出T的数据类型，才可以使用</p>
<h2 id="普通函数与函数模板区别"><a href="#普通函数与函数模板区别" class="headerlink" title="普通函数与函数模板区别"></a>普通函数与函数模板区别</h2><p>1、通函数调用时可以发生自动类型转换(隐式类型转换)<br>2、函数模板调用时，如果利用自动类型推导，不会发生隐式类型转换<br>3、如果利用显示指定类型的方式，可以发生隐式类型转换(传引用的时候，不会发生隐式类型转换)</p>
<h2 id="普通函数与函数模板的调用规则"><a href="#普通函数与函数模板的调用规则" class="headerlink" title="普通函数与函数模板的调用规则"></a>普通函数与函数模板的调用规则</h2><p>1、如果函数模板和普通函数都可以实现，优先调用普通函数<br>2、可以通过空模板参数列表来强制调用函数模板<br>3、函数模板也可以发生重载<br>4、如果函数模板可以产生更好的匹配，优先调用函数模板</p>
<p><strong>总结:既然提供了函数模板，最好就不要提供普通函数，否则容易出现二义性</strong></p>
<h2 id="模板的局限性"><a href="#模板的局限性" class="headerlink" title="模板的局限性"></a>模板的局限性</h2><p>模板的通用性不是万能的<br>如果T的数据类型传入的是自定义数据类型,有些操作无法正常运行<br>因此C++为了解决这种问题，提供模板的重载，可以<strong>为这些特定的类型提供具体化的模板</strong></p>
<p>利用具体化的模板，可以解决自定义类型的通用化<br>学习模板是为在STL能够运用系统提供的模板  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">person</span>(<span class="keyword">const</span> string&amp; name, <span class="keyword">const</span> <span class="keyword">int</span>&amp; age) :_name(name), _age(age) &#123;&#125;</span><br><span class="line">    string _name;</span><br><span class="line">    <span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模板函数</span></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Compare</span><span class="params">(<span class="keyword">const</span> T&amp; a, <span class="keyword">const</span> T&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a == b) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//特定类型具体化</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Compare</span><span class="params">(<span class="keyword">const</span> person&amp; p1, <span class="keyword">const</span> person&amp; p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p1._age == p2._age &amp;&amp; p1._name == p2._name) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(T&amp; a, T&amp; b)</span> </span>&#123;</span><br><span class="line">    T t = a; a = b; b = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Swap</span><span class="params">(<span class="keyword">int</span>&amp; a, <span class="keyword">int</span>&amp; b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t = a; a = b; b = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SelectSort</span><span class="params">(T* a, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> min_dex = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[min_dex] &gt; a[j]) min_dex = j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">Swap</span>(a[i], a[min_dex]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> T* <span class="keyword">const</span> a, <span class="keyword">const</span> <span class="keyword">int</span>&amp; n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>; cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n; cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> a[N] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) a[i] = <span class="built_in">rand</span>() % <span class="number">256</span>;</span><br><span class="line">    <span class="built_in">print</span>(a, n);</span><br><span class="line">    <span class="built_in">SelectSort</span>(a, n);</span><br><span class="line">    <span class="built_in">print</span>(a,n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">char</span> y = <span class="string">&#x27;y&#x27;</span>;</span><br><span class="line">    <span class="keyword">int</span> z = <span class="number">20</span>;</span><br><span class="line">    <span class="comment">//Swap&lt;int&gt;(x, y); //传引用的时候，不会发生隐式类型转换</span></span><br><span class="line">    <span class="built_in">Swap</span>(x, z); <span class="comment">//默认调用普通函数</span></span><br><span class="line">    Swap&lt;&gt;(x, z); <span class="comment">//强制调用模板函数</span></span><br><span class="line"></span><br><span class="line">    <span class="function">person <span class="title">p1</span><span class="params">(<span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>)</span>, <span class="title">p2</span><span class="params">(<span class="string">&quot;Jack&quot;</span>, <span class="number">10</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; boolalpha &lt;&lt; <span class="built_in">Compare</span>(p1, p2) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shallowshades.github.io.git/2022/02/01/%E6%B3%9B%E5%9E%8B%E7%BC%96%E7%A8%8B1/" data-id="clca7m48v001pxog0bhsyd3xr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DesignMode/" rel="tag">DesignMode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database/" rel="tag">database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/" rel="tag">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net/" rel="tag">net</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C</a> <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/DesignMode/" style="font-size: 10px;">DesignMode</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/golang/" style="font-size: 10px;">golang</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/net/" style="font-size: 10px;">net</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/12/13/Linux/">Linux</a>
          </li>
        
          <li>
            <a href="/2022/12/13/Redis/">Redis</a>
          </li>
        
          <li>
            <a href="/2022/12/13/ginchat/">ginchat</a>
          </li>
        
          <li>
            <a href="/2022/12/13/go/">Go</a>
          </li>
        
          <li>
            <a href="/2022/09/08/git/">git</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 未名<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>